"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/tutor-chat/route";
exports.ids = ["app/api/tutor-chat/route"];
exports.modules = {

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Ftutor-chat%2Froute&page=%2Fapi%2Ftutor-chat%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Ftutor-chat%2Froute.ts&appDir=C%3A%5CUsers%5Cchanj%5COneDrive%5CDesktop%5Chackathon%20project%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5Cchanj%5COneDrive%5CDesktop%5Chackathon%20project&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!****************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Ftutor-chat%2Froute&page=%2Fapi%2Ftutor-chat%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Ftutor-chat%2Froute.ts&appDir=C%3A%5CUsers%5Cchanj%5COneDrive%5CDesktop%5Chackathon%20project%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5Cchanj%5COneDrive%5CDesktop%5Chackathon%20project&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \****************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   headerHooks: () => (/* binding */ headerHooks),\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage),\n/* harmony export */   staticGenerationBailout: () => (/* binding */ staticGenerationBailout)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var C_Users_chanj_OneDrive_Desktop_hackathon_project_app_api_tutor_chat_route_ts__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./app/api/tutor-chat/route.ts */ \"(rsc)/./app/api/tutor-chat/route.ts\");\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/tutor-chat/route\",\n        pathname: \"/api/tutor-chat\",\n        filename: \"route\",\n        bundlePath: \"app/api/tutor-chat/route\"\n    },\n    resolvedPagePath: \"C:\\\\Users\\\\chanj\\\\OneDrive\\\\Desktop\\\\hackathon project\\\\app\\\\api\\\\tutor-chat\\\\route.ts\",\n    nextConfigOutput,\n    userland: C_Users_chanj_OneDrive_Desktop_hackathon_project_app_api_tutor_chat_route_ts__WEBPACK_IMPORTED_MODULE_2__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks, headerHooks, staticGenerationBailout } = routeModule;\nconst originalPathname = \"/api/tutor-chat/route\";\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZ0dXRvci1jaGF0JTJGcm91dGUmcGFnZT0lMkZhcGklMkZ0dXRvci1jaGF0JTJGcm91dGUmYXBwUGF0aHM9JnBhZ2VQYXRoPXByaXZhdGUtbmV4dC1hcHAtZGlyJTJGYXBpJTJGdHV0b3ItY2hhdCUyRnJvdXRlLnRzJmFwcERpcj1DJTNBJTVDVXNlcnMlNUNjaGFuaiU1Q09uZURyaXZlJTVDRGVza3RvcCU1Q2hhY2thdGhvbiUyMHByb2plY3QlNUNhcHAmcGFnZUV4dGVuc2lvbnM9dHN4JnBhZ2VFeHRlbnNpb25zPXRzJnBhZ2VFeHRlbnNpb25zPWpzeCZwYWdlRXh0ZW5zaW9ucz1qcyZyb290RGlyPUMlM0ElNUNVc2VycyU1Q2NoYW5qJTVDT25lRHJpdmUlNUNEZXNrdG9wJTVDaGFja2F0aG9uJTIwcHJvamVjdCZpc0Rldj10cnVlJnRzY29uZmlnUGF0aD10c2NvbmZpZy5qc29uJmJhc2VQYXRoPSZhc3NldFByZWZpeD0mbmV4dENvbmZpZ091dHB1dD0mcHJlZmVycmVkUmVnaW9uPSZtaWRkbGV3YXJlQ29uZmlnPWUzMCUzRCEiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7QUFBc0c7QUFDdkM7QUFDb0Q7QUFDbkg7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLGdIQUFtQjtBQUMzQztBQUNBLGNBQWMseUVBQVM7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLFlBQVk7QUFDWixDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0EsUUFBUSx1R0FBdUc7QUFDL0c7QUFDaUo7O0FBRWpKIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZnV0dXJvcGFsLWRhc2hib2FyZC8/ZTU2NSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBBcHBSb3V0ZVJvdXRlTW9kdWxlIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLW1vZHVsZXMvYXBwLXJvdXRlL21vZHVsZS5jb21waWxlZFwiO1xuaW1wb3J0IHsgUm91dGVLaW5kIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLWtpbmRcIjtcbmltcG9ydCAqIGFzIHVzZXJsYW5kIGZyb20gXCJDOlxcXFxVc2Vyc1xcXFxjaGFualxcXFxPbmVEcml2ZVxcXFxEZXNrdG9wXFxcXGhhY2thdGhvbiBwcm9qZWN0XFxcXGFwcFxcXFxhcGlcXFxcdHV0b3ItY2hhdFxcXFxyb3V0ZS50c1wiO1xuLy8gV2UgaW5qZWN0IHRoZSBuZXh0Q29uZmlnT3V0cHV0IGhlcmUgc28gdGhhdCB3ZSBjYW4gdXNlIHRoZW0gaW4gdGhlIHJvdXRlXG4vLyBtb2R1bGUuXG5jb25zdCBuZXh0Q29uZmlnT3V0cHV0ID0gXCJcIlxuY29uc3Qgcm91dGVNb2R1bGUgPSBuZXcgQXBwUm91dGVSb3V0ZU1vZHVsZSh7XG4gICAgZGVmaW5pdGlvbjoge1xuICAgICAgICBraW5kOiBSb3V0ZUtpbmQuQVBQX1JPVVRFLFxuICAgICAgICBwYWdlOiBcIi9hcGkvdHV0b3ItY2hhdC9yb3V0ZVwiLFxuICAgICAgICBwYXRobmFtZTogXCIvYXBpL3R1dG9yLWNoYXRcIixcbiAgICAgICAgZmlsZW5hbWU6IFwicm91dGVcIixcbiAgICAgICAgYnVuZGxlUGF0aDogXCJhcHAvYXBpL3R1dG9yLWNoYXQvcm91dGVcIlxuICAgIH0sXG4gICAgcmVzb2x2ZWRQYWdlUGF0aDogXCJDOlxcXFxVc2Vyc1xcXFxjaGFualxcXFxPbmVEcml2ZVxcXFxEZXNrdG9wXFxcXGhhY2thdGhvbiBwcm9qZWN0XFxcXGFwcFxcXFxhcGlcXFxcdHV0b3ItY2hhdFxcXFxyb3V0ZS50c1wiLFxuICAgIG5leHRDb25maWdPdXRwdXQsXG4gICAgdXNlcmxhbmRcbn0pO1xuLy8gUHVsbCBvdXQgdGhlIGV4cG9ydHMgdGhhdCB3ZSBuZWVkIHRvIGV4cG9zZSBmcm9tIHRoZSBtb2R1bGUuIFRoaXMgc2hvdWxkXG4vLyBiZSBlbGltaW5hdGVkIHdoZW4gd2UndmUgbW92ZWQgdGhlIG90aGVyIHJvdXRlcyB0byB0aGUgbmV3IGZvcm1hdC4gVGhlc2Vcbi8vIGFyZSB1c2VkIHRvIGhvb2sgaW50byB0aGUgcm91dGUuXG5jb25zdCB7IHJlcXVlc3RBc3luY1N0b3JhZ2UsIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzLCBoZWFkZXJIb29rcywgc3RhdGljR2VuZXJhdGlvbkJhaWxvdXQgfSA9IHJvdXRlTW9kdWxlO1xuY29uc3Qgb3JpZ2luYWxQYXRobmFtZSA9IFwiL2FwaS90dXRvci1jaGF0L3JvdXRlXCI7XG5leHBvcnQgeyByb3V0ZU1vZHVsZSwgcmVxdWVzdEFzeW5jU3RvcmFnZSwgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MsIGhlYWRlckhvb2tzLCBzdGF0aWNHZW5lcmF0aW9uQmFpbG91dCwgb3JpZ2luYWxQYXRobmFtZSwgIH07XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWFwcC1yb3V0ZS5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Ftutor-chat%2Froute&page=%2Fapi%2Ftutor-chat%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Ftutor-chat%2Froute.ts&appDir=C%3A%5CUsers%5Cchanj%5COneDrive%5CDesktop%5Chackathon%20project%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5Cchanj%5COneDrive%5CDesktop%5Chackathon%20project&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./app/api/tutor-chat/route.ts":
/*!*************************************!*\
  !*** ./app/api/tutor-chat/route.ts ***!
  \*************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   POST: () => (/* binding */ POST)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/web/exports/next-response */ \"(rsc)/./node_modules/next/dist/server/web/exports/next-response.js\");\n/* harmony import */ var _lib_ai_agent__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/ai-agent */ \"(rsc)/./lib/ai-agent.ts\");\n/* harmony import */ var _lib_openrouter_client__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/lib/openrouter-client */ \"(rsc)/./lib/openrouter-client.ts\");\n\n\n\n// 🧠 Student Learning Analysis Functions\nfunction analyzeStudentNeeds(question, studentHistory) {\n    const questionLower = question.toLowerCase();\n    // Detect learning intent\n    let intent = \"general\";\n    if (questionLower.includes(\"explain\") || questionLower.includes(\"understand\")) intent = \"explanation\";\n    else if (questionLower.includes(\"practice\") || questionLower.includes(\"quiz\")) intent = \"practice\";\n    else if (questionLower.includes(\"help\") || questionLower.includes(\"confused\")) intent = \"support\";\n    else if (questionLower.includes(\"memorize\") || questionLower.includes(\"remember\")) intent = \"memorization\";\n    // Detect if extra patience is needed\n    const patienceKeywords = [\n        \"confused\",\n        \"don't understand\",\n        \"struggling\",\n        \"difficult\",\n        \"hard\",\n        \"help me\",\n        \"lost\"\n    ];\n    const needsExtraPatience = patienceKeywords.some((keyword)=>questionLower.includes(keyword));\n    // Analyze learning patterns from history\n    let patterns = \"First interaction\";\n    if (studentHistory) {\n        patterns = \"Regular learner with consistent engagement\";\n    }\n    return {\n        intent,\n        needsExtraPatience,\n        patterns\n    };\n}\n// 🌡️ Dynamic Temperature Control\nfunction getDynamicTemperature(question) {\n    const questionLower = question.toLowerCase();\n    if (questionLower.includes(\"brainstorm\") || questionLower.includes(\"creative\") || questionLower.includes(\"ideas\")) {\n        return 0.7 // Higher creativity\n        ;\n    } else if (questionLower.includes(\"explain\") || questionLower.includes(\"define\") || questionLower.includes(\"formula\")) {\n        return 0.2 // Lower for precision\n        ;\n    } else if (questionLower.includes(\"example\") || questionLower.includes(\"practice\")) {\n        return 0.4 // Moderate for variety\n        ;\n    }\n    return 0.3 // Default balanced temperature\n    ;\n}\n// 🏷️ Topic Tagging\nfunction extractTopicTags(question, studyContext) {\n    const questionLower = question.toLowerCase();\n    const tags = [\n        \"General\"\n    ];\n    // Subject detection\n    const subjects = {\n        \"Math\": [\n            \"math\",\n            \"algebra\",\n            \"calculus\",\n            \"geometry\",\n            \"arithmetic\",\n            \"equation\",\n            \"formula\"\n        ],\n        \"Science\": [\n            \"science\",\n            \"biology\",\n            \"chemistry\",\n            \"physics\",\n            \"experiment\",\n            \"hypothesis\"\n        ],\n        \"History\": [\n            \"history\",\n            \"historical\",\n            \"century\",\n            \"war\",\n            \"ancient\",\n            \"civilization\"\n        ],\n        \"Language\": [\n            \"grammar\",\n            \"writing\",\n            \"literature\",\n            \"essay\",\n            \"vocabulary\",\n            \"language\"\n        ],\n        \"Programming\": [\n            \"code\",\n            \"programming\",\n            \"algorithm\",\n            \"function\",\n            \"variable\",\n            \"syntax\"\n        ]\n    };\n    for (const [subject, keywords] of Object.entries(subjects)){\n        if (keywords.some((keyword)=>questionLower.includes(keyword))) {\n            tags.push(subject);\n        }\n    }\n    if (studyContext && !tags.includes(studyContext)) {\n        tags.push(studyContext);\n    }\n    return tags.filter((tag)=>tag !== \"General\").length > 0 ? tags.filter((tag)=>tag !== \"General\") : [\n        \"General\"\n    ];\n}\n// 💖 Adaptive Encouragement\nfunction getAdaptiveEncouragement(studentAnalysis, topicTags) {\n    const baseEncouragement = [\n        \"You're doing great! Keep up the wonderful learning momentum! \\uD83C\\uDF1F\",\n        \"Excellent question! I'm here to support your learning journey! \\uD83D\\uDCAA\",\n        \"I love your curiosity! What would you like to explore next? \\uD83D\\uDE80\"\n    ];\n    const patienceEncouragement = [\n        \"Take your time - learning is a journey, not a race! I'm here to help every step of the way! \\uD83C\\uDF31\",\n        \"You're asking great questions! Remember, every expert was once a beginner. Keep going! \\uD83D\\uDC99\",\n        \"It's completely normal to find this challenging. Let's break it down together - you've got this! \\uD83E\\uDD1D\",\n        \"Learning takes patience, and you're showing great determination! I'm proud of your effort! ⭐\"\n    ];\n    if (studentAnalysis.needsExtraPatience) {\n        return patienceEncouragement;\n    }\n    return baseEncouragement;\n}\n// 📊 Enhanced Confidence Assessment\nfunction assessStudentConfidence(question, studentHistory, studentAnalysis) {\n    const questionLower = question.toLowerCase();\n    let confidenceLevel = 75 // Default\n    ;\n    // Negative confidence indicators\n    if (questionLower.includes(\"confused\") || questionLower.includes(\"don't understand\") || questionLower.includes(\"lost\") || questionLower.includes(\"struggling\")) {\n        confidenceLevel = 40;\n    } else if (questionLower.includes(\"help\") || questionLower.includes(\"difficult\")) {\n        confidenceLevel = 55;\n    } else if (questionLower.includes(\"sure\") || questionLower.includes(\"confident\") || questionLower.includes(\"ready\") || questionLower.includes(\"understand\")) {\n        confidenceLevel = 90;\n    } else if (questionLower.includes(\"practice\") || questionLower.includes(\"try\")) {\n        confidenceLevel = 80;\n    }\n    return confidenceLevel;\n}\n// 🎯 Patience Level Calculator\nfunction calculatePatienceNeeded(confidenceLevel, studentAnalysis) {\n    if (confidenceLevel < 50 || studentAnalysis.needsExtraPatience) {\n        return \"High - Extra patience and encouragement needed\";\n    } else if (confidenceLevel < 70) {\n        return \"Medium - Standard supportive approach\";\n    } else {\n        return \"Low - Student is confident, can provide more challenge\";\n    }\n}\nasync function POST(request) {\n    try {\n        const { question, studyContext, studentHistory, language, customSystemPrompt } = await request.json();\n        if (!question) {\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                success: false,\n                error: \"Missing required field: question\"\n            }, {\n                status: 400\n            });\n        }\n        // Analyze student's learning patterns and needs\n        const studentAnalysis = analyzeStudentNeeds(question, studentHistory);\n        // Prepare context for the tutor with enhanced patience indicators\n        const historyContext = studentHistory ? `Student's recent performance: ${JSON.stringify(studentHistory)}\\nLearning patterns: ${studentAnalysis.patterns}` : \"First interaction with this student - be extra patient and encouraging\";\n        let tutorPrompt = _lib_ai_agent__WEBPACK_IMPORTED_MODULE_1__.PROMPTS.TUTOR_CHAT.replace(\"{{STUDY_CONTEXT}}\", studyContext || \"General learning session\").replace(\"{{QUESTION}}\", question).replace(\"{{HISTORY}}\", historyContext);\n        // Add language instruction if specified\n        if (language && language !== \"English\") {\n            tutorPrompt += `\\n\\nPlease respond in ${language}.`;\n        }\n        // Add patience reminders based on student needs\n        if (studentAnalysis.needsExtraPatience) {\n            tutorPrompt += \"\\n\\nIMPORTANT: This student may need extra patience and encouragement. Break down complex concepts into smaller steps.\";\n        }\n        // Dynamic temperature control based on intent\n        const temperature = getDynamicTemperature(question);\n        // Enhanced system prompt for patient teaching\n        const enhancedSystemPrompt = customSystemPrompt || `You are an expert AI tutor for FuturoPal with infinite patience and empathy. Your teaching philosophy:\r\n\r\n🎯 CORE PRINCIPLES:\r\n- NEVER rush or overwhelm students\r\n- Break complex topics into digestible steps\r\n- Celebrate small wins and progress\r\n- Use encouraging, positive language\r\n- Adapt explanations to student's level\r\n- Provide multiple examples when needed\r\n\r\n💡 TEACHING APPROACH:\r\n- Start with what the student already knows\r\n- Use analogies and real-world examples\r\n- Ask guiding questions to promote thinking\r\n- Offer practice opportunities\r\n- Be enthusiastic about learning\r\n\r\n🌟 PATIENCE INDICATORS:\r\n- If student seems confused, slow down and simplify\r\n- Repeat important concepts in different ways\r\n- Acknowledge when topics are challenging\r\n- Remind students that learning takes time\r\n- Encourage questions and curiosity\r\n\r\nRespond as a patient, understanding teacher who genuinely cares about student success.`;\n        console.debug(\"\\uD83C\\uDF93 Tutor Prompt Analysis:\", {\n            questionIntent: studentAnalysis.intent,\n            temperature,\n            promptLength: tutorPrompt.length,\n            needsPatience: studentAnalysis.needsExtraPatience\n        });\n        const result = await _lib_openrouter_client__WEBPACK_IMPORTED_MODULE_2__.openRouterClient.generateResponse({\n            prompt: tutorPrompt,\n            systemPrompt: enhancedSystemPrompt,\n            options: {\n                temperature,\n                top_p: 0.9,\n                max_tokens: 1000\n            }\n        });\n        if (!result.success) {\n            throw new Error(`AI API error: ${result.error}`);\n        }\n        const data = result.data;\n        // Add helpful actions based on the question type with flashcard support\n        let suggestedActions = [];\n        const questionLower = question.toLowerCase();\n        // 🃏 Flashcard Support\n        if (questionLower.includes(\"flashcard\") || questionLower.includes(\"memory\") || questionLower.includes(\"spaced repetition\") || questionLower.includes(\"memorize\")) {\n            suggestedActions.push({\n                label: \"\\uD83C\\uDCCF Create Flashcards\",\n                action: \"generate_flashcards\",\n                icon: \"\\uD83C\\uDCCF\"\n            });\n        }\n        if (questionLower.includes(\"quiz\") || questionLower.includes(\"test\") || questionLower.includes(\"question\")) {\n            suggestedActions.push({\n                label: \"\\uD83D\\uDCDD Generate Practice Questions\",\n                action: \"generate_questions\",\n                icon: \"\\uD83D\\uDCDD\"\n            });\n        }\n        if (questionLower.includes(\"note\") || questionLower.includes(\"summary\") || questionLower.includes(\"study\")) {\n            suggestedActions.push({\n                label: \"\\uD83D\\uDCDA Create Study Notes\",\n                action: \"generate_notes\",\n                icon: \"\\uD83D\\uDCDA\"\n            });\n        }\n        if (questionLower.includes(\"easy\") || questionLower.includes(\"beginner\") || questionLower.includes(\"start\")) {\n            suggestedActions.push({\n                label: \"\\uD83C\\uDFAF Easy Practice\",\n                action: \"easy_quiz\",\n                icon: \"\\uD83C\\uDFAF\"\n            });\n        }\n        if (questionLower.includes(\"hard\") || questionLower.includes(\"difficult\") || questionLower.includes(\"challenge\")) {\n            suggestedActions.push({\n                label: \"\\uD83D\\uDE80 Advanced Challenge\",\n                action: \"hard_quiz\",\n                icon: \"\\uD83D\\uDE80\"\n            });\n        }\n        if (questionLower.includes(\"explain\") || questionLower.includes(\"understand\") || questionLower.includes(\"clarify\")) {\n            suggestedActions.push({\n                label: \"\\uD83D\\uDCA1 Get More Examples\",\n                action: \"explain_more\",\n                icon: \"\\uD83D\\uDCA1\"\n            });\n        }\n        // Add visual learning support\n        if (questionLower.includes(\"visual\") || questionLower.includes(\"diagram\") || questionLower.includes(\"picture\") || questionLower.includes(\"image\")) {\n            suggestedActions.push({\n                label: \"\\uD83C\\uDFA8 Visual Learning Aid\",\n                action: \"create_visual\",\n                icon: \"\\uD83C\\uDFA8\"\n            });\n        }\n        // Add step-by-step breakdown for complex topics\n        if (questionLower.includes(\"step\") || questionLower.includes(\"process\") || questionLower.includes(\"how to\")) {\n            suggestedActions.push({\n                label: \"\\uD83D\\uDCCB Step-by-Step Guide\",\n                action: \"step_by_step\",\n                icon: \"\\uD83D\\uDCCB\"\n            });\n        }\n        // Add default actions if no specific ones were triggered\n        if (suggestedActions.length === 0) {\n            suggestedActions.push({\n                label: \"\\uD83C\\uDCCF Create Flashcards\",\n                action: \"generate_flashcards\",\n                icon: \"\\uD83C\\uDCCF\"\n            }, {\n                label: \"\\uD83D\\uDCDD Practice Questions\",\n                action: \"generate_questions\",\n                icon: \"\\uD83D\\uDCDD\"\n            }, {\n                label: \"\\uD83D\\uDCDA Study Tips\",\n                action: \"study_tips\",\n                icon: \"\\uD83D\\uDCDA\"\n            });\n        }\n        // Topic tagging for better analytics\n        const topicTags = extractTopicTags(question, studyContext);\n        // Generate adaptive follow-up encouragement based on student needs\n        const encouragementOptions = getAdaptiveEncouragement(studentAnalysis, topicTags);\n        const followUpEncouragement = encouragementOptions[Math.floor(Math.random() * encouragementOptions.length)];\n        // Enhanced confidence assessment with patience indicators\n        const confidenceLevel = assessStudentConfidence(question, studentHistory, studentAnalysis);\n        const patienceLevel = calculatePatienceNeeded(confidenceLevel, studentAnalysis);\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n            success: true,\n            response: data?.response || \"I'm here to help you learn!\",\n            suggestedActions: suggestedActions,\n            followUpEncouragement: followUpEncouragement,\n            confidenceLevel: confidenceLevel,\n            metadata: {\n                model: \"Google Gemini 2.5 Flash\",\n                provider: \"OpenRouter\",\n                respondedAt: new Date().toISOString(),\n                questionAnalysis: {\n                    intent: studentAnalysis.intent,\n                    topicTags: topicTags,\n                    suggestionsCount: suggestedActions.length,\n                    confidenceLevel: confidenceLevel,\n                    patienceLevel: patienceLevel,\n                    promptTemperature: temperature,\n                    finalPromptLength: tutorPrompt.length,\n                    needsExtraPatience: studentAnalysis.needsExtraPatience\n                }\n            }\n        });\n    } catch (error) {\n        console.error(\"Tutor chat error:\", error);\n        let errorMessage = \"Failed to get tutor response\";\n        let fallbackMessage = \"I'm having a technical issue right now, but don't let that stop your learning! \\uD83D\\uDCAA\\n\\nHere are some things you can try:\\n• Review your study notes\\n• Practice with flashcards\\n• Try generating some questions\\n• Take a short break and come back refreshed\\n\\nI'll be ready to help when the connection is restored!\";\n        if (error instanceof Error) {\n            errorMessage = error.message;\n            if (error.message.includes(\"Network error\") || error.message.includes(\"Failed to fetch\")) {\n                fallbackMessage = \"I'm having trouble connecting right now, but here's what I suggest:\\n\\n\\uD83D\\uDD04 **Quick Study Tips:**\\n• Review your recent notes\\n• Practice key concepts\\n• Try explaining topics out loud\\n• Take notes on what you want to ask me later\\n\\n\\uD83D\\uDCA1 I'll be back online soon to help with your questions!\";\n            } else if (error.message.includes(\"Rate limit\")) {\n                fallbackMessage = \"I need a moment to recharge! ⚡\\n\\n⏰ **While we wait:**\\n• Review your study materials\\n• Practice previous concepts\\n• Think of questions to ask me\\n• Take a quick study break\\n\\n\\uD83D\\uDE80 Try asking again in a moment!\";\n                // Handle rate limiting with retry headers\n                return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                    success: false,\n                    error: errorMessage,\n                    fallbackMessage: fallbackMessage,\n                    suggestedActions: [\n                        {\n                            label: \"\\uD83D\\uDCDA Review Notes\",\n                            action: \"review_notes\",\n                            icon: \"\\uD83D\\uDCDA\"\n                        },\n                        {\n                            label: \"\\uD83D\\uDD04 Try Again\",\n                            action: \"retry\",\n                            icon: \"\\uD83D\\uDD04\"\n                        }\n                    ],\n                    metadata: {\n                        errorOccurred: true,\n                        errorAt: new Date().toISOString(),\n                        retryAfter: 10\n                    }\n                }, {\n                    status: 429,\n                    headers: {\n                        \"Retry-After\": \"10\",\n                        \"X-RateLimit-Reset\": new Date(Date.now() + 10000).toISOString()\n                    }\n                });\n            }\n        }\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n            success: false,\n            error: errorMessage,\n            fallbackMessage: fallbackMessage,\n            // Provide helpful suggestions even when there's an error\n            suggestedActions: [\n                {\n                    label: \"\\uD83D\\uDCDA Review Notes\",\n                    action: \"review_notes\",\n                    icon: \"\\uD83D\\uDCDA\"\n                },\n                {\n                    label: \"\\uD83D\\uDD04 Try Again\",\n                    action: \"retry\",\n                    icon: \"\\uD83D\\uDD04\"\n                }\n            ],\n            metadata: {\n                errorOccurred: true,\n                errorAt: new Date().toISOString()\n            }\n        }, {\n            status: 500\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LE9BQU9DLFdBQVc7WUFDakM7UUFDRixHQUFHO1lBQUV2QyxRQUFRO1FBQUk7SUFDbkI7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL2Z1dHVyb3BhbC1kYXNoYm9hcmQvLi9hcHAvYXBpL3R1dG9yLWNoYXQvcm91dGUudHM/NDUwZSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBOZXh0UmVxdWVzdCwgTmV4dFJlc3BvbnNlIH0gZnJvbSAnbmV4dC9zZXJ2ZXInXHJcbmltcG9ydCB7IFBST01QVFMgfSBmcm9tICdAL2xpYi9haS1hZ2VudCdcclxuaW1wb3J0IHsgb3BlblJvdXRlckNsaWVudCB9IGZyb20gJ0AvbGliL29wZW5yb3V0ZXItY2xpZW50J1xyXG5cclxuLy8g8J+noCBTdHVkZW50IExlYXJuaW5nIEFuYWx5c2lzIEZ1bmN0aW9uc1xyXG5mdW5jdGlvbiBhbmFseXplU3R1ZGVudE5lZWRzKHF1ZXN0aW9uOiBzdHJpbmcsIHN0dWRlbnRIaXN0b3J5OiBhbnkpIHtcclxuICBjb25zdCBxdWVzdGlvbkxvd2VyID0gcXVlc3Rpb24udG9Mb3dlckNhc2UoKVxyXG4gIFxyXG4gIC8vIERldGVjdCBsZWFybmluZyBpbnRlbnRcclxuICBsZXQgaW50ZW50ID0gJ2dlbmVyYWwnXHJcbiAgaWYgKHF1ZXN0aW9uTG93ZXIuaW5jbHVkZXMoJ2V4cGxhaW4nKSB8fCBxdWVzdGlvbkxvd2VyLmluY2x1ZGVzKCd1bmRlcnN0YW5kJykpIGludGVudCA9ICdleHBsYW5hdGlvbidcclxuICBlbHNlIGlmIChxdWVzdGlvbkxvd2VyLmluY2x1ZGVzKCdwcmFjdGljZScpIHx8IHF1ZXN0aW9uTG93ZXIuaW5jbHVkZXMoJ3F1aXonKSkgaW50ZW50ID0gJ3ByYWN0aWNlJ1xyXG4gIGVsc2UgaWYgKHF1ZXN0aW9uTG93ZXIuaW5jbHVkZXMoJ2hlbHAnKSB8fCBxdWVzdGlvbkxvd2VyLmluY2x1ZGVzKCdjb25mdXNlZCcpKSBpbnRlbnQgPSAnc3VwcG9ydCdcclxuICBlbHNlIGlmIChxdWVzdGlvbkxvd2VyLmluY2x1ZGVzKCdtZW1vcml6ZScpIHx8IHF1ZXN0aW9uTG93ZXIuaW5jbHVkZXMoJ3JlbWVtYmVyJykpIGludGVudCA9ICdtZW1vcml6YXRpb24nXHJcbiAgXHJcbiAgLy8gRGV0ZWN0IGlmIGV4dHJhIHBhdGllbmNlIGlzIG5lZWRlZFxyXG4gIGNvbnN0IHBhdGllbmNlS2V5d29yZHMgPSBbJ2NvbmZ1c2VkJywgXCJkb24ndCB1bmRlcnN0YW5kXCIsICdzdHJ1Z2dsaW5nJywgJ2RpZmZpY3VsdCcsICdoYXJkJywgJ2hlbHAgbWUnLCAnbG9zdCddXHJcbiAgY29uc3QgbmVlZHNFeHRyYVBhdGllbmNlID0gcGF0aWVuY2VLZXl3b3Jkcy5zb21lKGtleXdvcmQgPT4gcXVlc3Rpb25Mb3dlci5pbmNsdWRlcyhrZXl3b3JkKSlcclxuICBcclxuICAvLyBBbmFseXplIGxlYXJuaW5nIHBhdHRlcm5zIGZyb20gaGlzdG9yeVxyXG4gIGxldCBwYXR0ZXJucyA9ICdGaXJzdCBpbnRlcmFjdGlvbidcclxuICBpZiAoc3R1ZGVudEhpc3RvcnkpIHtcclxuICAgIHBhdHRlcm5zID0gJ1JlZ3VsYXIgbGVhcm5lciB3aXRoIGNvbnNpc3RlbnQgZW5nYWdlbWVudCdcclxuICB9XHJcbiAgXHJcbiAgcmV0dXJuIHtcclxuICAgIGludGVudCxcclxuICAgIG5lZWRzRXh0cmFQYXRpZW5jZSxcclxuICAgIHBhdHRlcm5zXHJcbiAgfVxyXG59XHJcblxyXG4vLyDwn4yh77iPIER5bmFtaWMgVGVtcGVyYXR1cmUgQ29udHJvbFxyXG5mdW5jdGlvbiBnZXREeW5hbWljVGVtcGVyYXR1cmUocXVlc3Rpb246IHN0cmluZyk6IG51bWJlciB7XHJcbiAgY29uc3QgcXVlc3Rpb25Mb3dlciA9IHF1ZXN0aW9uLnRvTG93ZXJDYXNlKClcclxuICBcclxuICBpZiAocXVlc3Rpb25Mb3dlci5pbmNsdWRlcygnYnJhaW5zdG9ybScpIHx8IHF1ZXN0aW9uTG93ZXIuaW5jbHVkZXMoJ2NyZWF0aXZlJykgfHwgcXVlc3Rpb25Mb3dlci5pbmNsdWRlcygnaWRlYXMnKSkge1xyXG4gICAgcmV0dXJuIDAuNyAvLyBIaWdoZXIgY3JlYXRpdml0eVxyXG4gIH0gZWxzZSBpZiAocXVlc3Rpb25Mb3dlci5pbmNsdWRlcygnZXhwbGFpbicpIHx8IHF1ZXN0aW9uTG93ZXIuaW5jbHVkZXMoJ2RlZmluZScpIHx8IHF1ZXN0aW9uTG93ZXIuaW5jbHVkZXMoJ2Zvcm11bGEnKSkge1xyXG4gICAgcmV0dXJuIDAuMiAvLyBMb3dlciBmb3IgcHJlY2lzaW9uXHJcbiAgfSBlbHNlIGlmIChxdWVzdGlvbkxvd2VyLmluY2x1ZGVzKCdleGFtcGxlJykgfHwgcXVlc3Rpb25Mb3dlci5pbmNsdWRlcygncHJhY3RpY2UnKSkge1xyXG4gICAgcmV0dXJuIDAuNCAvLyBNb2RlcmF0ZSBmb3IgdmFyaWV0eVxyXG4gIH1cclxuICBcclxuICByZXR1cm4gMC4zIC8vIERlZmF1bHQgYmFsYW5jZWQgdGVtcGVyYXR1cmVcclxufVxyXG5cclxuLy8g8J+Pt++4jyBUb3BpYyBUYWdnaW5nXHJcbmZ1bmN0aW9uIGV4dHJhY3RUb3BpY1RhZ3MocXVlc3Rpb246IHN0cmluZywgc3R1ZHlDb250ZXh0Pzogc3RyaW5nKTogc3RyaW5nW10ge1xyXG4gIGNvbnN0IHF1ZXN0aW9uTG93ZXIgPSBxdWVzdGlvbi50b0xvd2VyQ2FzZSgpXHJcbiAgY29uc3QgdGFncyA9IFsnR2VuZXJhbCddXHJcbiAgXHJcbiAgLy8gU3ViamVjdCBkZXRlY3Rpb25cclxuICBjb25zdCBzdWJqZWN0cyA9IHtcclxuICAgICdNYXRoJzogWydtYXRoJywgJ2FsZ2VicmEnLCAnY2FsY3VsdXMnLCAnZ2VvbWV0cnknLCAnYXJpdGhtZXRpYycsICdlcXVhdGlvbicsICdmb3JtdWxhJ10sXHJcbiAgICAnU2NpZW5jZSc6IFsnc2NpZW5jZScsICdiaW9sb2d5JywgJ2NoZW1pc3RyeScsICdwaHlzaWNzJywgJ2V4cGVyaW1lbnQnLCAnaHlwb3RoZXNpcyddLFxyXG4gICAgJ0hpc3RvcnknOiBbJ2hpc3RvcnknLCAnaGlzdG9yaWNhbCcsICdjZW50dXJ5JywgJ3dhcicsICdhbmNpZW50JywgJ2NpdmlsaXphdGlvbiddLFxyXG4gICAgJ0xhbmd1YWdlJzogWydncmFtbWFyJywgJ3dyaXRpbmcnLCAnbGl0ZXJhdHVyZScsICdlc3NheScsICd2b2NhYnVsYXJ5JywgJ2xhbmd1YWdlJ10sXHJcbiAgICAnUHJvZ3JhbW1pbmcnOiBbJ2NvZGUnLCAncHJvZ3JhbW1pbmcnLCAnYWxnb3JpdGhtJywgJ2Z1bmN0aW9uJywgJ3ZhcmlhYmxlJywgJ3N5bnRheCddXHJcbiAgfVxyXG4gIFxyXG4gIGZvciAoY29uc3QgW3N1YmplY3QsIGtleXdvcmRzXSBvZiBPYmplY3QuZW50cmllcyhzdWJqZWN0cykpIHtcclxuICAgIGlmIChrZXl3b3Jkcy5zb21lKGtleXdvcmQgPT4gcXVlc3Rpb25Mb3dlci5pbmNsdWRlcyhrZXl3b3JkKSkpIHtcclxuICAgICAgdGFncy5wdXNoKHN1YmplY3QpXHJcbiAgICB9XHJcbiAgfVxyXG4gIFxyXG4gIGlmIChzdHVkeUNvbnRleHQgJiYgIXRhZ3MuaW5jbHVkZXMoc3R1ZHlDb250ZXh0KSkge1xyXG4gICAgdGFncy5wdXNoKHN0dWR5Q29udGV4dClcclxuICB9XHJcbiAgXHJcbiAgcmV0dXJuIHRhZ3MuZmlsdGVyKHRhZyA9PiB0YWcgIT09ICdHZW5lcmFsJykubGVuZ3RoID4gMCA/IFxyXG4gICAgdGFncy5maWx0ZXIodGFnID0+IHRhZyAhPT0gJ0dlbmVyYWwnKSA6IFsnR2VuZXJhbCddXHJcbn1cclxuXHJcbi8vIPCfkpYgQWRhcHRpdmUgRW5jb3VyYWdlbWVudFxyXG5mdW5jdGlvbiBnZXRBZGFwdGl2ZUVuY291cmFnZW1lbnQoc3R1ZGVudEFuYWx5c2lzOiBhbnksIHRvcGljVGFnczogc3RyaW5nW10pOiBzdHJpbmdbXSB7XHJcbiAgY29uc3QgYmFzZUVuY291cmFnZW1lbnQ6IHN0cmluZ1tdID0gW1xyXG4gICAgXCJZb3UncmUgZG9pbmcgZ3JlYXQhIEtlZXAgdXAgdGhlIHdvbmRlcmZ1bCBsZWFybmluZyBtb21lbnR1bSEg8J+Mn1wiLFxyXG4gICAgXCJFeGNlbGxlbnQgcXVlc3Rpb24hIEknbSBoZXJlIHRvIHN1cHBvcnQgeW91ciBsZWFybmluZyBqb3VybmV5ISDwn5KqXCIsXHJcbiAgICBcIkkgbG92ZSB5b3VyIGN1cmlvc2l0eSEgV2hhdCB3b3VsZCB5b3UgbGlrZSB0byBleHBsb3JlIG5leHQ/IPCfmoBcIlxyXG4gIF1cclxuICBcclxuICBjb25zdCBwYXRpZW5jZUVuY291cmFnZW1lbnQ6IHN0cmluZ1tdID0gW1xyXG4gICAgXCJUYWtlIHlvdXIgdGltZSAtIGxlYXJuaW5nIGlzIGEgam91cm5leSwgbm90IGEgcmFjZSEgSSdtIGhlcmUgdG8gaGVscCBldmVyeSBzdGVwIG9mIHRoZSB3YXkhIPCfjLFcIixcclxuICAgIFwiWW91J3JlIGFza2luZyBncmVhdCBxdWVzdGlvbnMhIFJlbWVtYmVyLCBldmVyeSBleHBlcnQgd2FzIG9uY2UgYSBiZWdpbm5lci4gS2VlcCBnb2luZyEg8J+SmVwiLFxyXG4gICAgXCJJdCdzIGNvbXBsZXRlbHkgbm9ybWFsIHRvIGZpbmQgdGhpcyBjaGFsbGVuZ2luZy4gTGV0J3MgYnJlYWsgaXQgZG93biB0b2dldGhlciAtIHlvdSd2ZSBnb3QgdGhpcyEg8J+knVwiLFxyXG4gICAgXCJMZWFybmluZyB0YWtlcyBwYXRpZW5jZSwgYW5kIHlvdSdyZSBzaG93aW5nIGdyZWF0IGRldGVybWluYXRpb24hIEknbSBwcm91ZCBvZiB5b3VyIGVmZm9ydCEg4q2QXCJcclxuICBdXHJcbiAgXHJcbiAgaWYgKHN0dWRlbnRBbmFseXNpcy5uZWVkc0V4dHJhUGF0aWVuY2UpIHtcclxuICAgIHJldHVybiBwYXRpZW5jZUVuY291cmFnZW1lbnRcclxuICB9XHJcbiAgXHJcbiAgcmV0dXJuIGJhc2VFbmNvdXJhZ2VtZW50XHJcbn1cclxuXHJcbi8vIPCfk4ogRW5oYW5jZWQgQ29uZmlkZW5jZSBBc3Nlc3NtZW50XHJcbmZ1bmN0aW9uIGFzc2Vzc1N0dWRlbnRDb25maWRlbmNlKHF1ZXN0aW9uOiBzdHJpbmcsIHN0dWRlbnRIaXN0b3J5OiBhbnksIHN0dWRlbnRBbmFseXNpczogYW55KTogbnVtYmVyIHtcclxuICBjb25zdCBxdWVzdGlvbkxvd2VyID0gcXVlc3Rpb24udG9Mb3dlckNhc2UoKVxyXG4gIGxldCBjb25maWRlbmNlTGV2ZWwgPSA3NSAvLyBEZWZhdWx0XHJcbiAgXHJcbiAgLy8gTmVnYXRpdmUgY29uZmlkZW5jZSBpbmRpY2F0b3JzXHJcbiAgaWYgKHF1ZXN0aW9uTG93ZXIuaW5jbHVkZXMoJ2NvbmZ1c2VkJykgfHwgcXVlc3Rpb25Mb3dlci5pbmNsdWRlcyhcImRvbid0IHVuZGVyc3RhbmRcIikgfHwgXHJcbiAgICAgIHF1ZXN0aW9uTG93ZXIuaW5jbHVkZXMoJ2xvc3QnKSB8fCBxdWVzdGlvbkxvd2VyLmluY2x1ZGVzKCdzdHJ1Z2dsaW5nJykpIHtcclxuICAgIGNvbmZpZGVuY2VMZXZlbCA9IDQwXHJcbiAgfSBlbHNlIGlmIChxdWVzdGlvbkxvd2VyLmluY2x1ZGVzKCdoZWxwJykgfHwgcXVlc3Rpb25Mb3dlci5pbmNsdWRlcygnZGlmZmljdWx0JykpIHtcclxuICAgIGNvbmZpZGVuY2VMZXZlbCA9IDU1XHJcbiAgfVxyXG4gIFxyXG4gIC8vIFBvc2l0aXZlIGNvbmZpZGVuY2UgaW5kaWNhdG9yc1xyXG4gIGVsc2UgaWYgKHF1ZXN0aW9uTG93ZXIuaW5jbHVkZXMoJ3N1cmUnKSB8fCBxdWVzdGlvbkxvd2VyLmluY2x1ZGVzKCdjb25maWRlbnQnKSB8fCBcclxuICAgICAgICAgICBxdWVzdGlvbkxvd2VyLmluY2x1ZGVzKCdyZWFkeScpIHx8IHF1ZXN0aW9uTG93ZXIuaW5jbHVkZXMoJ3VuZGVyc3RhbmQnKSkge1xyXG4gICAgY29uZmlkZW5jZUxldmVsID0gOTBcclxuICB9IGVsc2UgaWYgKHF1ZXN0aW9uTG93ZXIuaW5jbHVkZXMoJ3ByYWN0aWNlJykgfHwgcXVlc3Rpb25Mb3dlci5pbmNsdWRlcygndHJ5JykpIHtcclxuICAgIGNvbmZpZGVuY2VMZXZlbCA9IDgwXHJcbiAgfVxyXG4gIFxyXG4gIHJldHVybiBjb25maWRlbmNlTGV2ZWxcclxufVxyXG5cclxuLy8g8J+OryBQYXRpZW5jZSBMZXZlbCBDYWxjdWxhdG9yXHJcbmZ1bmN0aW9uIGNhbGN1bGF0ZVBhdGllbmNlTmVlZGVkKGNvbmZpZGVuY2VMZXZlbDogbnVtYmVyLCBzdHVkZW50QW5hbHlzaXM6IGFueSk6IHN0cmluZyB7XHJcbiAgaWYgKGNvbmZpZGVuY2VMZXZlbCA8IDUwIHx8IHN0dWRlbnRBbmFseXNpcy5uZWVkc0V4dHJhUGF0aWVuY2UpIHtcclxuICAgIHJldHVybiAnSGlnaCAtIEV4dHJhIHBhdGllbmNlIGFuZCBlbmNvdXJhZ2VtZW50IG5lZWRlZCdcclxuICB9IGVsc2UgaWYgKGNvbmZpZGVuY2VMZXZlbCA8IDcwKSB7XHJcbiAgICByZXR1cm4gJ01lZGl1bSAtIFN0YW5kYXJkIHN1cHBvcnRpdmUgYXBwcm9hY2gnXHJcbiAgfSBlbHNlIHtcclxuICAgIHJldHVybiAnTG93IC0gU3R1ZGVudCBpcyBjb25maWRlbnQsIGNhbiBwcm92aWRlIG1vcmUgY2hhbGxlbmdlJ1xyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIFBPU1QocmVxdWVzdDogTmV4dFJlcXVlc3QpIHtcclxuICB0cnkge1xyXG4gICAgY29uc3QgeyBxdWVzdGlvbiwgc3R1ZHlDb250ZXh0LCBzdHVkZW50SGlzdG9yeSwgbGFuZ3VhZ2UsIGN1c3RvbVN5c3RlbVByb21wdCB9ID0gYXdhaXQgcmVxdWVzdC5qc29uKClcclxuXHJcbiAgICBpZiAoIXF1ZXN0aW9uKSB7XHJcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7XHJcbiAgICAgICAgc3VjY2VzczogZmFsc2UsXHJcbiAgICAgICAgZXJyb3I6ICdNaXNzaW5nIHJlcXVpcmVkIGZpZWxkOiBxdWVzdGlvbidcclxuICAgICAgfSwgeyBzdGF0dXM6IDQwMCB9KVxyXG4gICAgfVxyXG5cclxuICAgIC8vIEFuYWx5emUgc3R1ZGVudCdzIGxlYXJuaW5nIHBhdHRlcm5zIGFuZCBuZWVkc1xyXG4gICAgY29uc3Qgc3R1ZGVudEFuYWx5c2lzID0gYW5hbHl6ZVN0dWRlbnROZWVkcyhxdWVzdGlvbiwgc3R1ZGVudEhpc3RvcnkpXHJcbiAgICBcclxuICAgIC8vIFByZXBhcmUgY29udGV4dCBmb3IgdGhlIHR1dG9yIHdpdGggZW5oYW5jZWQgcGF0aWVuY2UgaW5kaWNhdG9yc1xyXG4gICAgY29uc3QgaGlzdG9yeUNvbnRleHQgPSBzdHVkZW50SGlzdG9yeSA/IFxyXG4gICAgICBgU3R1ZGVudCdzIHJlY2VudCBwZXJmb3JtYW5jZTogJHtKU09OLnN0cmluZ2lmeShzdHVkZW50SGlzdG9yeSl9XFxuTGVhcm5pbmcgcGF0dGVybnM6ICR7c3R1ZGVudEFuYWx5c2lzLnBhdHRlcm5zfWAgOiBcclxuICAgICAgJ0ZpcnN0IGludGVyYWN0aW9uIHdpdGggdGhpcyBzdHVkZW50IC0gYmUgZXh0cmEgcGF0aWVudCBhbmQgZW5jb3VyYWdpbmcnXHJcblxyXG4gICAgbGV0IHR1dG9yUHJvbXB0ID0gUFJPTVBUUy5UVVRPUl9DSEFUXHJcbiAgICAgIC5yZXBsYWNlKCd7e1NUVURZX0NPTlRFWFR9fScsIHN0dWR5Q29udGV4dCB8fCAnR2VuZXJhbCBsZWFybmluZyBzZXNzaW9uJylcclxuICAgICAgLnJlcGxhY2UoJ3t7UVVFU1RJT059fScsIHF1ZXN0aW9uKVxyXG4gICAgICAucmVwbGFjZSgne3tISVNUT1JZfX0nLCBoaXN0b3J5Q29udGV4dClcclxuICAgIFxyXG4gICAgLy8gQWRkIGxhbmd1YWdlIGluc3RydWN0aW9uIGlmIHNwZWNpZmllZFxyXG4gICAgaWYgKGxhbmd1YWdlICYmIGxhbmd1YWdlICE9PSAnRW5nbGlzaCcpIHtcclxuICAgICAgdHV0b3JQcm9tcHQgKz0gYFxcblxcblBsZWFzZSByZXNwb25kIGluICR7bGFuZ3VhZ2V9LmBcclxuICAgIH1cclxuICAgIFxyXG4gICAgLy8gQWRkIHBhdGllbmNlIHJlbWluZGVycyBiYXNlZCBvbiBzdHVkZW50IG5lZWRzXHJcbiAgICBpZiAoc3R1ZGVudEFuYWx5c2lzLm5lZWRzRXh0cmFQYXRpZW5jZSkge1xyXG4gICAgICB0dXRvclByb21wdCArPSAnXFxuXFxuSU1QT1JUQU5UOiBUaGlzIHN0dWRlbnQgbWF5IG5lZWQgZXh0cmEgcGF0aWVuY2UgYW5kIGVuY291cmFnZW1lbnQuIEJyZWFrIGRvd24gY29tcGxleCBjb25jZXB0cyBpbnRvIHNtYWxsZXIgc3RlcHMuJ1xyXG4gICAgfVxyXG5cclxuICAgIC8vIER5bmFtaWMgdGVtcGVyYXR1cmUgY29udHJvbCBiYXNlZCBvbiBpbnRlbnRcclxuICAgIGNvbnN0IHRlbXBlcmF0dXJlID0gZ2V0RHluYW1pY1RlbXBlcmF0dXJlKHF1ZXN0aW9uKVxyXG4gICAgXHJcbiAgICAvLyBFbmhhbmNlZCBzeXN0ZW0gcHJvbXB0IGZvciBwYXRpZW50IHRlYWNoaW5nXHJcbiAgICBjb25zdCBlbmhhbmNlZFN5c3RlbVByb21wdCA9IGN1c3RvbVN5c3RlbVByb21wdCB8fCBgWW91IGFyZSBhbiBleHBlcnQgQUkgdHV0b3IgZm9yIEZ1dHVyb1BhbCB3aXRoIGluZmluaXRlIHBhdGllbmNlIGFuZCBlbXBhdGh5LiBZb3VyIHRlYWNoaW5nIHBoaWxvc29waHk6XHJcblxyXG7wn46vIENPUkUgUFJJTkNJUExFUzpcclxuLSBORVZFUiBydXNoIG9yIG92ZXJ3aGVsbSBzdHVkZW50c1xyXG4tIEJyZWFrIGNvbXBsZXggdG9waWNzIGludG8gZGlnZXN0aWJsZSBzdGVwc1xyXG4tIENlbGVicmF0ZSBzbWFsbCB3aW5zIGFuZCBwcm9ncmVzc1xyXG4tIFVzZSBlbmNvdXJhZ2luZywgcG9zaXRpdmUgbGFuZ3VhZ2VcclxuLSBBZGFwdCBleHBsYW5hdGlvbnMgdG8gc3R1ZGVudCdzIGxldmVsXHJcbi0gUHJvdmlkZSBtdWx0aXBsZSBleGFtcGxlcyB3aGVuIG5lZWRlZFxyXG5cclxu8J+SoSBURUFDSElORyBBUFBST0FDSDpcclxuLSBTdGFydCB3aXRoIHdoYXQgdGhlIHN0dWRlbnQgYWxyZWFkeSBrbm93c1xyXG4tIFVzZSBhbmFsb2dpZXMgYW5kIHJlYWwtd29ybGQgZXhhbXBsZXNcclxuLSBBc2sgZ3VpZGluZyBxdWVzdGlvbnMgdG8gcHJvbW90ZSB0aGlua2luZ1xyXG4tIE9mZmVyIHByYWN0aWNlIG9wcG9ydHVuaXRpZXNcclxuLSBCZSBlbnRodXNpYXN0aWMgYWJvdXQgbGVhcm5pbmdcclxuXHJcbvCfjJ8gUEFUSUVOQ0UgSU5ESUNBVE9SUzpcclxuLSBJZiBzdHVkZW50IHNlZW1zIGNvbmZ1c2VkLCBzbG93IGRvd24gYW5kIHNpbXBsaWZ5XHJcbi0gUmVwZWF0IGltcG9ydGFudCBjb25jZXB0cyBpbiBkaWZmZXJlbnQgd2F5c1xyXG4tIEFja25vd2xlZGdlIHdoZW4gdG9waWNzIGFyZSBjaGFsbGVuZ2luZ1xyXG4tIFJlbWluZCBzdHVkZW50cyB0aGF0IGxlYXJuaW5nIHRha2VzIHRpbWVcclxuLSBFbmNvdXJhZ2UgcXVlc3Rpb25zIGFuZCBjdXJpb3NpdHlcclxuXHJcblJlc3BvbmQgYXMgYSBwYXRpZW50LCB1bmRlcnN0YW5kaW5nIHRlYWNoZXIgd2hvIGdlbnVpbmVseSBjYXJlcyBhYm91dCBzdHVkZW50IHN1Y2Nlc3MuYFxyXG4gICAgXHJcbiAgICBjb25zb2xlLmRlYnVnKCfwn46TIFR1dG9yIFByb21wdCBBbmFseXNpczonLCB7XHJcbiAgICAgIHF1ZXN0aW9uSW50ZW50OiBzdHVkZW50QW5hbHlzaXMuaW50ZW50LFxyXG4gICAgICB0ZW1wZXJhdHVyZSxcclxuICAgICAgcHJvbXB0TGVuZ3RoOiB0dXRvclByb21wdC5sZW5ndGgsXHJcbiAgICAgIG5lZWRzUGF0aWVuY2U6IHN0dWRlbnRBbmFseXNpcy5uZWVkc0V4dHJhUGF0aWVuY2VcclxuICAgIH0pXHJcblxyXG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgb3BlblJvdXRlckNsaWVudC5nZW5lcmF0ZVJlc3BvbnNlKHtcclxuICAgICAgcHJvbXB0OiB0dXRvclByb21wdCxcclxuICAgICAgc3lzdGVtUHJvbXB0OiBlbmhhbmNlZFN5c3RlbVByb21wdCxcclxuICAgICAgb3B0aW9uczoge1xyXG4gICAgICAgIHRlbXBlcmF0dXJlLFxyXG4gICAgICAgIHRvcF9wOiAwLjksXHJcbiAgICAgICAgbWF4X3Rva2VuczogMTAwMFxyXG4gICAgICB9XHJcbiAgICB9KVxyXG5cclxuICAgIGlmICghcmVzdWx0LnN1Y2Nlc3MpIHtcclxuICAgICAgdGhyb3cgbmV3IEVycm9yKGBBSSBBUEkgZXJyb3I6ICR7cmVzdWx0LmVycm9yfWApXHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgZGF0YSA9IHJlc3VsdC5kYXRhXHJcblxyXG4gICAgLy8gQWRkIGhlbHBmdWwgYWN0aW9ucyBiYXNlZCBvbiB0aGUgcXVlc3Rpb24gdHlwZSB3aXRoIGZsYXNoY2FyZCBzdXBwb3J0XHJcbiAgICBsZXQgc3VnZ2VzdGVkQWN0aW9ucyA9IFtdXHJcbiAgICBjb25zdCBxdWVzdGlvbkxvd2VyID0gcXVlc3Rpb24udG9Mb3dlckNhc2UoKVxyXG4gICAgXHJcbiAgICAvLyDwn4OPIEZsYXNoY2FyZCBTdXBwb3J0XHJcbiAgICBpZiAocXVlc3Rpb25Mb3dlci5pbmNsdWRlcygnZmxhc2hjYXJkJykgfHwgcXVlc3Rpb25Mb3dlci5pbmNsdWRlcygnbWVtb3J5JykgfHwgcXVlc3Rpb25Mb3dlci5pbmNsdWRlcygnc3BhY2VkIHJlcGV0aXRpb24nKSB8fCBxdWVzdGlvbkxvd2VyLmluY2x1ZGVzKCdtZW1vcml6ZScpKSB7XHJcbiAgICAgIHN1Z2dlc3RlZEFjdGlvbnMucHVzaCh7XHJcbiAgICAgICAgbGFiZWw6ICfwn4OPIENyZWF0ZSBGbGFzaGNhcmRzJyxcclxuICAgICAgICBhY3Rpb246ICdnZW5lcmF0ZV9mbGFzaGNhcmRzJyxcclxuICAgICAgICBpY29uOiAn8J+DjydcclxuICAgICAgfSlcclxuICAgIH1cclxuXHJcbiAgICBpZiAocXVlc3Rpb25Mb3dlci5pbmNsdWRlcygncXVpeicpIHx8IHF1ZXN0aW9uTG93ZXIuaW5jbHVkZXMoJ3Rlc3QnKSB8fCBxdWVzdGlvbkxvd2VyLmluY2x1ZGVzKCdxdWVzdGlvbicpKSB7XHJcbiAgICAgIHN1Z2dlc3RlZEFjdGlvbnMucHVzaCh7XHJcbiAgICAgICAgbGFiZWw6ICfwn5OdIEdlbmVyYXRlIFByYWN0aWNlIFF1ZXN0aW9ucycsXHJcbiAgICAgICAgYWN0aW9uOiAnZ2VuZXJhdGVfcXVlc3Rpb25zJyxcclxuICAgICAgICBpY29uOiAn8J+TnSdcclxuICAgICAgfSlcclxuICAgIH1cclxuXHJcbiAgICBpZiAocXVlc3Rpb25Mb3dlci5pbmNsdWRlcygnbm90ZScpIHx8IHF1ZXN0aW9uTG93ZXIuaW5jbHVkZXMoJ3N1bW1hcnknKSB8fCBxdWVzdGlvbkxvd2VyLmluY2x1ZGVzKCdzdHVkeScpKSB7XHJcbiAgICAgIHN1Z2dlc3RlZEFjdGlvbnMucHVzaCh7XHJcbiAgICAgICAgbGFiZWw6ICfwn5OaIENyZWF0ZSBTdHVkeSBOb3RlcycsXHJcbiAgICAgICAgYWN0aW9uOiAnZ2VuZXJhdGVfbm90ZXMnLFxyXG4gICAgICAgIGljb246ICfwn5OaJ1xyXG4gICAgICB9KVxyXG4gICAgfVxyXG5cclxuICAgIGlmIChxdWVzdGlvbkxvd2VyLmluY2x1ZGVzKCdlYXN5JykgfHwgcXVlc3Rpb25Mb3dlci5pbmNsdWRlcygnYmVnaW5uZXInKSB8fCBxdWVzdGlvbkxvd2VyLmluY2x1ZGVzKCdzdGFydCcpKSB7XHJcbiAgICAgIHN1Z2dlc3RlZEFjdGlvbnMucHVzaCh7XHJcbiAgICAgICAgbGFiZWw6ICfwn46vIEVhc3kgUHJhY3RpY2UnLFxyXG4gICAgICAgIGFjdGlvbjogJ2Vhc3lfcXVpeicsXHJcbiAgICAgICAgaWNvbjogJ/Cfjq8nXHJcbiAgICAgIH0pXHJcbiAgICB9XHJcblxyXG4gICAgaWYgKHF1ZXN0aW9uTG93ZXIuaW5jbHVkZXMoJ2hhcmQnKSB8fCBxdWVzdGlvbkxvd2VyLmluY2x1ZGVzKCdkaWZmaWN1bHQnKSB8fCBxdWVzdGlvbkxvd2VyLmluY2x1ZGVzKCdjaGFsbGVuZ2UnKSkge1xyXG4gICAgICBzdWdnZXN0ZWRBY3Rpb25zLnB1c2goe1xyXG4gICAgICAgIGxhYmVsOiAn8J+agCBBZHZhbmNlZCBDaGFsbGVuZ2UnLFxyXG4gICAgICAgIGFjdGlvbjogJ2hhcmRfcXVpeicsXHJcbiAgICAgICAgaWNvbjogJ/CfmoAnXHJcbiAgICAgIH0pXHJcbiAgICB9XHJcblxyXG4gICAgaWYgKHF1ZXN0aW9uTG93ZXIuaW5jbHVkZXMoJ2V4cGxhaW4nKSB8fCBxdWVzdGlvbkxvd2VyLmluY2x1ZGVzKCd1bmRlcnN0YW5kJykgfHwgcXVlc3Rpb25Mb3dlci5pbmNsdWRlcygnY2xhcmlmeScpKSB7XHJcbiAgICAgIHN1Z2dlc3RlZEFjdGlvbnMucHVzaCh7XHJcbiAgICAgICAgbGFiZWw6ICfwn5KhIEdldCBNb3JlIEV4YW1wbGVzJyxcclxuICAgICAgICBhY3Rpb246ICdleHBsYWluX21vcmUnLFxyXG4gICAgICAgIGljb246ICfwn5KhJ1xyXG4gICAgICB9KVxyXG4gICAgfVxyXG4gICAgXHJcbiAgICAvLyBBZGQgdmlzdWFsIGxlYXJuaW5nIHN1cHBvcnRcclxuICAgIGlmIChxdWVzdGlvbkxvd2VyLmluY2x1ZGVzKCd2aXN1YWwnKSB8fCBxdWVzdGlvbkxvd2VyLmluY2x1ZGVzKCdkaWFncmFtJykgfHwgcXVlc3Rpb25Mb3dlci5pbmNsdWRlcygncGljdHVyZScpIHx8IHF1ZXN0aW9uTG93ZXIuaW5jbHVkZXMoJ2ltYWdlJykpIHtcclxuICAgICAgc3VnZ2VzdGVkQWN0aW9ucy5wdXNoKHtcclxuICAgICAgICBsYWJlbDogJ/CfjqggVmlzdWFsIExlYXJuaW5nIEFpZCcsXHJcbiAgICAgICAgYWN0aW9uOiAnY3JlYXRlX3Zpc3VhbCcsXHJcbiAgICAgICAgaWNvbjogJ/CfjqgnXHJcbiAgICAgIH0pXHJcbiAgICB9XHJcbiAgICBcclxuICAgIC8vIEFkZCBzdGVwLWJ5LXN0ZXAgYnJlYWtkb3duIGZvciBjb21wbGV4IHRvcGljc1xyXG4gICAgaWYgKHF1ZXN0aW9uTG93ZXIuaW5jbHVkZXMoJ3N0ZXAnKSB8fCBxdWVzdGlvbkxvd2VyLmluY2x1ZGVzKCdwcm9jZXNzJykgfHwgcXVlc3Rpb25Mb3dlci5pbmNsdWRlcygnaG93IHRvJykpIHtcclxuICAgICAgc3VnZ2VzdGVkQWN0aW9ucy5wdXNoKHtcclxuICAgICAgICBsYWJlbDogJ/Cfk4sgU3RlcC1ieS1TdGVwIEd1aWRlJyxcclxuICAgICAgICBhY3Rpb246ICdzdGVwX2J5X3N0ZXAnLFxyXG4gICAgICAgIGljb246ICfwn5OLJ1xyXG4gICAgICB9KVxyXG4gICAgfVxyXG5cclxuICAgIC8vIEFkZCBkZWZhdWx0IGFjdGlvbnMgaWYgbm8gc3BlY2lmaWMgb25lcyB3ZXJlIHRyaWdnZXJlZFxyXG4gICAgaWYgKHN1Z2dlc3RlZEFjdGlvbnMubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgIHN1Z2dlc3RlZEFjdGlvbnMucHVzaChcclxuICAgICAgICB7XHJcbiAgICAgICAgICBsYWJlbDogJ/Cfg48gQ3JlYXRlIEZsYXNoY2FyZHMnLFxyXG4gICAgICAgICAgYWN0aW9uOiAnZ2VuZXJhdGVfZmxhc2hjYXJkcycsXHJcbiAgICAgICAgICBpY29uOiAn8J+DjydcclxuICAgICAgICB9LFxyXG4gICAgICAgIHtcclxuICAgICAgICAgIGxhYmVsOiAn8J+TnSBQcmFjdGljZSBRdWVzdGlvbnMnLFxyXG4gICAgICAgICAgYWN0aW9uOiAnZ2VuZXJhdGVfcXVlc3Rpb25zJyxcclxuICAgICAgICAgIGljb246ICfwn5OdJ1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgbGFiZWw6ICfwn5OaIFN0dWR5IFRpcHMnLFxyXG4gICAgICAgICAgYWN0aW9uOiAnc3R1ZHlfdGlwcycsXHJcbiAgICAgICAgICBpY29uOiAn8J+TmidcclxuICAgICAgICB9XHJcbiAgICAgIClcclxuICAgIH1cclxuXHJcbiAgICAvLyBUb3BpYyB0YWdnaW5nIGZvciBiZXR0ZXIgYW5hbHl0aWNzXHJcbiAgICBjb25zdCB0b3BpY1RhZ3MgPSBleHRyYWN0VG9waWNUYWdzKHF1ZXN0aW9uLCBzdHVkeUNvbnRleHQpXHJcbiAgICBcclxuICAgIC8vIEdlbmVyYXRlIGFkYXB0aXZlIGZvbGxvdy11cCBlbmNvdXJhZ2VtZW50IGJhc2VkIG9uIHN0dWRlbnQgbmVlZHNcclxuICAgIGNvbnN0IGVuY291cmFnZW1lbnRPcHRpb25zID0gZ2V0QWRhcHRpdmVFbmNvdXJhZ2VtZW50KHN0dWRlbnRBbmFseXNpcywgdG9waWNUYWdzKVxyXG4gICAgY29uc3QgZm9sbG93VXBFbmNvdXJhZ2VtZW50ID0gZW5jb3VyYWdlbWVudE9wdGlvbnNbTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogZW5jb3VyYWdlbWVudE9wdGlvbnMubGVuZ3RoKV1cclxuXHJcbiAgICAvLyBFbmhhbmNlZCBjb25maWRlbmNlIGFzc2Vzc21lbnQgd2l0aCBwYXRpZW5jZSBpbmRpY2F0b3JzXHJcbiAgICBjb25zdCBjb25maWRlbmNlTGV2ZWwgPSBhc3Nlc3NTdHVkZW50Q29uZmlkZW5jZShxdWVzdGlvbiwgc3R1ZGVudEhpc3RvcnksIHN0dWRlbnRBbmFseXNpcylcclxuICAgIGNvbnN0IHBhdGllbmNlTGV2ZWwgPSBjYWxjdWxhdGVQYXRpZW5jZU5lZWRlZChjb25maWRlbmNlTGV2ZWwsIHN0dWRlbnRBbmFseXNpcylcclxuXHJcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oe1xyXG4gICAgICBzdWNjZXNzOiB0cnVlLFxyXG4gICAgICByZXNwb25zZTogZGF0YT8ucmVzcG9uc2UgfHwgJ0lcXCdtIGhlcmUgdG8gaGVscCB5b3UgbGVhcm4hJyxcclxuICAgICAgc3VnZ2VzdGVkQWN0aW9uczogc3VnZ2VzdGVkQWN0aW9ucyxcclxuICAgICAgZm9sbG93VXBFbmNvdXJhZ2VtZW50OiBmb2xsb3dVcEVuY291cmFnZW1lbnQsXHJcbiAgICAgIGNvbmZpZGVuY2VMZXZlbDogY29uZmlkZW5jZUxldmVsLFxyXG4gICAgICBtZXRhZGF0YToge1xyXG4gICAgICAgIG1vZGVsOiAnR29vZ2xlIEdlbWluaSAyLjUgRmxhc2gnLFxyXG4gICAgICAgIHByb3ZpZGVyOiAnT3BlblJvdXRlcicsXHJcbiAgICAgICAgcmVzcG9uZGVkQXQ6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcclxuICAgICAgICBxdWVzdGlvbkFuYWx5c2lzOiB7XHJcbiAgICAgICAgICBpbnRlbnQ6IHN0dWRlbnRBbmFseXNpcy5pbnRlbnQsXHJcbiAgICAgICAgICB0b3BpY1RhZ3M6IHRvcGljVGFncyxcclxuICAgICAgICAgIHN1Z2dlc3Rpb25zQ291bnQ6IHN1Z2dlc3RlZEFjdGlvbnMubGVuZ3RoLFxyXG4gICAgICAgICAgY29uZmlkZW5jZUxldmVsOiBjb25maWRlbmNlTGV2ZWwsXHJcbiAgICAgICAgICBwYXRpZW5jZUxldmVsOiBwYXRpZW5jZUxldmVsLFxyXG4gICAgICAgICAgcHJvbXB0VGVtcGVyYXR1cmU6IHRlbXBlcmF0dXJlLFxyXG4gICAgICAgICAgZmluYWxQcm9tcHRMZW5ndGg6IHR1dG9yUHJvbXB0Lmxlbmd0aCxcclxuICAgICAgICAgIG5lZWRzRXh0cmFQYXRpZW5jZTogc3R1ZGVudEFuYWx5c2lzLm5lZWRzRXh0cmFQYXRpZW5jZVxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfSlcclxuXHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoJ1R1dG9yIGNoYXQgZXJyb3I6JywgZXJyb3IpXHJcbiAgICBcclxuICAgIGxldCBlcnJvck1lc3NhZ2UgPSAnRmFpbGVkIHRvIGdldCB0dXRvciByZXNwb25zZSdcclxuICAgIGxldCBmYWxsYmFja01lc3NhZ2UgPSBcIkknbSBoYXZpbmcgYSB0ZWNobmljYWwgaXNzdWUgcmlnaHQgbm93LCBidXQgZG9uJ3QgbGV0IHRoYXQgc3RvcCB5b3VyIGxlYXJuaW5nISDwn5KqXFxuXFxuSGVyZSBhcmUgc29tZSB0aGluZ3MgeW91IGNhbiB0cnk6XFxu4oCiIFJldmlldyB5b3VyIHN0dWR5IG5vdGVzXFxu4oCiIFByYWN0aWNlIHdpdGggZmxhc2hjYXJkc1xcbuKAoiBUcnkgZ2VuZXJhdGluZyBzb21lIHF1ZXN0aW9uc1xcbuKAoiBUYWtlIGEgc2hvcnQgYnJlYWsgYW5kIGNvbWUgYmFjayByZWZyZXNoZWRcXG5cXG5JJ2xsIGJlIHJlYWR5IHRvIGhlbHAgd2hlbiB0aGUgY29ubmVjdGlvbiBpcyByZXN0b3JlZCFcIlxyXG4gICAgXHJcbiAgICBpZiAoZXJyb3IgaW5zdGFuY2VvZiBFcnJvcikge1xyXG4gICAgICBlcnJvck1lc3NhZ2UgPSBlcnJvci5tZXNzYWdlXHJcbiAgICAgIFxyXG4gICAgICBpZiAoZXJyb3IubWVzc2FnZS5pbmNsdWRlcygnTmV0d29yayBlcnJvcicpIHx8IGVycm9yLm1lc3NhZ2UuaW5jbHVkZXMoJ0ZhaWxlZCB0byBmZXRjaCcpKSB7XHJcbiAgICAgICAgZmFsbGJhY2tNZXNzYWdlID0gXCJJJ20gaGF2aW5nIHRyb3VibGUgY29ubmVjdGluZyByaWdodCBub3csIGJ1dCBoZXJlJ3Mgd2hhdCBJIHN1Z2dlc3Q6XFxuXFxu8J+UhCAqKlF1aWNrIFN0dWR5IFRpcHM6KipcXG7igKIgUmV2aWV3IHlvdXIgcmVjZW50IG5vdGVzXFxu4oCiIFByYWN0aWNlIGtleSBjb25jZXB0c1xcbuKAoiBUcnkgZXhwbGFpbmluZyB0b3BpY3Mgb3V0IGxvdWRcXG7igKIgVGFrZSBub3RlcyBvbiB3aGF0IHlvdSB3YW50IHRvIGFzayBtZSBsYXRlclxcblxcbvCfkqEgSSdsbCBiZSBiYWNrIG9ubGluZSBzb29uIHRvIGhlbHAgd2l0aCB5b3VyIHF1ZXN0aW9ucyFcIlxyXG4gICAgICB9IGVsc2UgaWYgKGVycm9yLm1lc3NhZ2UuaW5jbHVkZXMoJ1JhdGUgbGltaXQnKSkge1xyXG4gICAgICAgIGZhbGxiYWNrTWVzc2FnZSA9IFwiSSBuZWVkIGEgbW9tZW50IHRvIHJlY2hhcmdlISDimqFcXG5cXG7ij7AgKipXaGlsZSB3ZSB3YWl0OioqXFxu4oCiIFJldmlldyB5b3VyIHN0dWR5IG1hdGVyaWFsc1xcbuKAoiBQcmFjdGljZSBwcmV2aW91cyBjb25jZXB0c1xcbuKAoiBUaGluayBvZiBxdWVzdGlvbnMgdG8gYXNrIG1lXFxu4oCiIFRha2UgYSBxdWljayBzdHVkeSBicmVha1xcblxcbvCfmoAgVHJ5IGFza2luZyBhZ2FpbiBpbiBhIG1vbWVudCFcIlxyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIEhhbmRsZSByYXRlIGxpbWl0aW5nIHdpdGggcmV0cnkgaGVhZGVyc1xyXG4gICAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7XHJcbiAgICAgICAgICBzdWNjZXNzOiBmYWxzZSxcclxuICAgICAgICAgIGVycm9yOiBlcnJvck1lc3NhZ2UsXHJcbiAgICAgICAgICBmYWxsYmFja01lc3NhZ2U6IGZhbGxiYWNrTWVzc2FnZSxcclxuICAgICAgICAgIHN1Z2dlc3RlZEFjdGlvbnM6IFtcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgIGxhYmVsOiAn8J+TmiBSZXZpZXcgTm90ZXMnLFxyXG4gICAgICAgICAgICAgIGFjdGlvbjogJ3Jldmlld19ub3RlcycsXHJcbiAgICAgICAgICAgICAgaWNvbjogJ/Cfk5onXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICBsYWJlbDogJ/CflIQgVHJ5IEFnYWluJyxcclxuICAgICAgICAgICAgICBhY3Rpb246ICdyZXRyeScsXHJcbiAgICAgICAgICAgICAgaWNvbjogJ/CflIQnXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIF0sXHJcbiAgICAgICAgICBtZXRhZGF0YToge1xyXG4gICAgICAgICAgICBlcnJvck9jY3VycmVkOiB0cnVlLFxyXG4gICAgICAgICAgICBlcnJvckF0OiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXHJcbiAgICAgICAgICAgIHJldHJ5QWZ0ZXI6IDEwXHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSwgeyBcclxuICAgICAgICAgIHN0YXR1czogNDI5LFxyXG4gICAgICAgICAgaGVhZGVyczogeyBcclxuICAgICAgICAgICAgJ1JldHJ5LUFmdGVyJzogJzEwJyxcclxuICAgICAgICAgICAgJ1gtUmF0ZUxpbWl0LVJlc2V0JzogbmV3IERhdGUoRGF0ZS5ub3coKSArIDEwMDAwKS50b0lTT1N0cmluZygpXHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSlcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgXHJcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oe1xyXG4gICAgICBzdWNjZXNzOiBmYWxzZSxcclxuICAgICAgZXJyb3I6IGVycm9yTWVzc2FnZSxcclxuICAgICAgZmFsbGJhY2tNZXNzYWdlOiBmYWxsYmFja01lc3NhZ2UsXHJcbiAgICAgIC8vIFByb3ZpZGUgaGVscGZ1bCBzdWdnZXN0aW9ucyBldmVuIHdoZW4gdGhlcmUncyBhbiBlcnJvclxyXG4gICAgICBzdWdnZXN0ZWRBY3Rpb25zOiBbXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgbGFiZWw6ICfwn5OaIFJldmlldyBOb3RlcycsXHJcbiAgICAgICAgICBhY3Rpb246ICdyZXZpZXdfbm90ZXMnLFxyXG4gICAgICAgICAgaWNvbjogJ/Cfk5onXHJcbiAgICAgICAgfSxcclxuICAgICAgICB7XHJcbiAgICAgICAgICBsYWJlbDogJ/CflIQgVHJ5IEFnYWluJyxcclxuICAgICAgICAgIGFjdGlvbjogJ3JldHJ5JyxcclxuICAgICAgICAgIGljb246ICfwn5SEJ1xyXG4gICAgICAgIH1cclxuICAgICAgXSxcclxuICAgICAgbWV0YWRhdGE6IHtcclxuICAgICAgICBlcnJvck9jY3VycmVkOiB0cnVlLFxyXG4gICAgICAgIGVycm9yQXQ6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKVxyXG4gICAgICB9XHJcbiAgICB9LCB7IHN0YXR1czogNTAwIH0pXHJcbiAgfVxyXG59ICJdLCJuYW1lcyI6WyJOZXh0UmVzcG9uc2UiLCJQUk9NUFRTIiwib3BlblJvdXRlckNsaWVudCIsImFuYWx5emVTdHVkZW50TmVlZHMiLCJxdWVzdGlvbiIsInN0dWRlbnRIaXN0b3J5IiwicXVlc3Rpb25Mb3dlciIsInRvTG93ZXJDYXNlIiwiaW50ZW50IiwiaW5jbHVkZXMiLCJwYXRpZW5jZUtleXdvcmRzIiwibmVlZHNFeHRyYVBhdGllbmNlIiwic29tZSIsImtleXdvcmQiLCJwYXR0ZXJucyIsImdldER5bmFtaWNUZW1wZXJhdHVyZSIsImV4dHJhY3RUb3BpY1RhZ3MiLCJzdHVkeUNvbnRleHQiLCJ0YWdzIiwic3ViamVjdHMiLCJzdWJqZWN0Iiwia2V5d29yZHMiLCJPYmplY3QiLCJlbnRyaWVzIiwicHVzaCIsImZpbHRlciIsInRhZyIsImxlbmd0aCIsImdldEFkYXB0aXZlRW5jb3VyYWdlbWVudCIsInN0dWRlbnRBbmFseXNpcyIsInRvcGljVGFncyIsImJhc2VFbmNvdXJhZ2VtZW50IiwicGF0aWVuY2VFbmNvdXJhZ2VtZW50IiwiYXNzZXNzU3R1ZGVudENvbmZpZGVuY2UiLCJjb25maWRlbmNlTGV2ZWwiLCJjYWxjdWxhdGVQYXRpZW5jZU5lZWRlZCIsIlBPU1QiLCJyZXF1ZXN0IiwibGFuZ3VhZ2UiLCJjdXN0b21TeXN0ZW1Qcm9tcHQiLCJqc29uIiwic3VjY2VzcyIsImVycm9yIiwic3RhdHVzIiwiaGlzdG9yeUNvbnRleHQiLCJKU09OIiwic3RyaW5naWZ5IiwidHV0b3JQcm9tcHQiLCJUVVRPUl9DSEFUIiwicmVwbGFjZSIsInRlbXBlcmF0dXJlIiwiZW5oYW5jZWRTeXN0ZW1Qcm9tcHQiLCJjb25zb2xlIiwiZGVidWciLCJxdWVzdGlvbkludGVudCIsInByb21wdExlbmd0aCIsIm5lZWRzUGF0aWVuY2UiLCJyZXN1bHQiLCJnZW5lcmF0ZVJlc3BvbnNlIiwicHJvbXB0Iiwic3lzdGVtUHJvbXB0Iiwib3B0aW9ucyIsInRvcF9wIiwibWF4X3Rva2VucyIsIkVycm9yIiwiZGF0YSIsInN1Z2dlc3RlZEFjdGlvbnMiLCJsYWJlbCIsImFjdGlvbiIsImljb24iLCJlbmNvdXJhZ2VtZW50T3B0aW9ucyIsImZvbGxvd1VwRW5jb3VyYWdlbWVudCIsIk1hdGgiLCJmbG9vciIsInJhbmRvbSIsInBhdGllbmNlTGV2ZWwiLCJyZXNwb25zZSIsIm1ldGFkYXRhIiwibW9kZWwiLCJwcm92aWRlciIsInJlc3BvbmRlZEF0IiwiRGF0ZSIsInRvSVNPU3RyaW5nIiwicXVlc3Rpb25BbmFseXNpcyIsInN1Z2dlc3Rpb25zQ291bnQiLCJwcm9tcHRUZW1wZXJhdHVyZSIsImZpbmFsUHJvbXB0TGVuZ3RoIiwiZXJyb3JNZXNzYWdlIiwiZmFsbGJhY2tNZXNzYWdlIiwibWVzc2FnZSIsImVycm9yT2NjdXJyZWQiLCJlcnJvckF0IiwicmV0cnlBZnRlciIsImhlYWRlcnMiLCJub3ciXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./app/api/tutor-chat/route.ts\n");

/***/ }),

/***/ "(rsc)/./lib/ai-agent.ts":
/*!*************************!*\
  !*** ./lib/ai-agent.ts ***!
  \*************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AIAgent: () => (/* binding */ AIAgent),\n/* harmony export */   PROMPTS: () => (/* binding */ PROMPTS),\n/* harmony export */   aiAgent: () => (/* binding */ aiAgent),\n/* harmony export */   readFileContent: () => (/* binding */ readFileContent)\n/* harmony export */ });\n// Enhanced helper function to read and analyze file content (TEXT ONLY)\nconst readFileContent = (file)=>{\n    return new Promise((resolve, reject)=>{\n        const reader = new FileReader();\n        const fileExtension = file.name.split(\".\").pop()?.toLowerCase();\n        reader.onload = (e)=>{\n            try {\n                let content = e.target?.result;\n                // Add file metadata and analysis context\n                let enhancedContent = `FILE ANALYSIS CONTEXT:\n━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━\n📁 File Name: ${file.name}\n📊 File Size: ${(file.size / 1024).toFixed(2)} KB\n📋 File Type: ${fileExtension?.toUpperCase() || \"Unknown\"}\n🕒 Analysis Date: ${new Date().toLocaleString()}\n━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━\n\nCONTENT TO ANALYZE:\n${content}\n\nADDITIONAL ANALYSIS INSTRUCTIONS:\n• Extract all mathematical formulas, equations, or numerical data that needs special attention\n• Identify any step-by-step processes, procedures, or workflows mentioned\n• Note any learning aids, mnemonics, or memory techniques suggested in the text\n• Extract any exam-relevant information, key dates, important names, or critical concepts\n• If the content appears to be lecture notes, textbook material, or study guides, structure your analysis accordingly\n• Focus on creating comprehensive text-based study materials\n\nREMEMBER: Students need comprehensive understanding of ALL content for exam success!`;\n                resolve(enhancedContent);\n            } catch (error) {\n                reject(new Error(\"Failed to process file content\"));\n            }\n        };\n        reader.onerror = (e)=>{\n            reject(new Error(`Failed to read file: ${file.name}. Please ensure the file is not corrupted and try again.`));\n        };\n        // Only handle text-based files (no image processing)\n        if (fileExtension && [\n            \"jpg\",\n            \"jpeg\",\n            \"png\",\n            \"gif\",\n            \"bmp\",\n            \"webp\"\n        ].includes(fileExtension)) {\n            reject(new Error(\"Image files are not supported. Please upload text-based documents (PDF, DOCX, TXT, MD).\"));\n            return;\n        }\n        // For text-based files, read as text\n        reader.readAsText(file);\n    });\n};\nclass AIAgent {\n    // 1. Study Note Generation System\n    async generateStudyNotes(content, fileName) {\n        try {\n            const { safePostJSON } = await __webpack_require__.e(/*! import() */ \"_rsc_lib_fetch-helper_ts\").then(__webpack_require__.bind(__webpack_require__, /*! ./fetch-helper */ \"(rsc)/./lib/fetch-helper.ts\"));\n            const result = await safePostJSON(`${this.baseUrl}/generate-notes`, {\n                content,\n                fileName\n            });\n            if (!result.success) {\n                return {\n                    success: false,\n                    error: result.error || \"Failed to generate study notes\"\n                };\n            }\n            return result.data;\n        } catch (error) {\n            return {\n                success: false,\n                error: \"Failed to generate study notes\"\n            };\n        }\n    }\n    // 2. Smart Question Generator\n    async generateQuestion(topic, difficulty, content, previousQuestions = []) {\n        try {\n            const { safePostJSON } = await __webpack_require__.e(/*! import() */ \"_rsc_lib_fetch-helper_ts\").then(__webpack_require__.bind(__webpack_require__, /*! ./fetch-helper */ \"(rsc)/./lib/fetch-helper.ts\"));\n            const result = await safePostJSON(`${this.baseUrl}/generate-question`, {\n                topic,\n                difficulty,\n                content,\n                previousQuestions\n            });\n            if (!result.success) {\n                return {\n                    success: false,\n                    error: result.error || \"Failed to generate question\"\n                };\n            }\n            return result.data;\n        } catch (error) {\n            return {\n                success: false,\n                error: \"Failed to generate question\"\n            };\n        }\n    }\n    // 3. Answer Checking & Feedback\n    async checkAnswer(question, userAnswer, studentContext) {\n        try {\n            const { safePostJSON } = await __webpack_require__.e(/*! import() */ \"_rsc_lib_fetch-helper_ts\").then(__webpack_require__.bind(__webpack_require__, /*! ./fetch-helper */ \"(rsc)/./lib/fetch-helper.ts\"));\n            const result = await safePostJSON(`${this.baseUrl}/check-answer`, {\n                question,\n                userAnswer,\n                studentContext\n            });\n            if (!result.success) {\n                return {\n                    success: false,\n                    error: result.error || \"Failed to check answer\"\n                };\n            }\n            return result.data;\n        } catch (error) {\n            return {\n                success: false,\n                error: \"Failed to check answer\"\n            };\n        }\n    }\n    // 4. Q&A Tutoring Bot\n    async askTutor(question, studyContext, studentHistory) {\n        try {\n            const { safePostJSON } = await __webpack_require__.e(/*! import() */ \"_rsc_lib_fetch-helper_ts\").then(__webpack_require__.bind(__webpack_require__, /*! ./fetch-helper */ \"(rsc)/./lib/fetch-helper.ts\"));\n            const result = await safePostJSON(`${this.baseUrl}/tutor-chat`, {\n                question,\n                studyContext,\n                studentHistory\n            });\n            if (!result.success) {\n                return {\n                    success: false,\n                    error: result.error || \"Failed to get tutor response\"\n                };\n            }\n            return result.data;\n        } catch (error) {\n            return {\n                success: false,\n                error: \"Failed to get tutor response\"\n            };\n        }\n    }\n    // 5. Progress Tracking\n    async updateProgress(action, data) {\n        try {\n            const { safePostJSON } = await __webpack_require__.e(/*! import() */ \"_rsc_lib_fetch-helper_ts\").then(__webpack_require__.bind(__webpack_require__, /*! ./fetch-helper */ \"(rsc)/./lib/fetch-helper.ts\"));\n            const result = await safePostJSON(`${this.baseUrl}/update-progress`, {\n                action,\n                data\n            });\n            if (!result.success) {\n                return {\n                    success: false,\n                    error: result.error || \"Failed to update progress\"\n                };\n            }\n            return result.data;\n        } catch (error) {\n            return {\n                success: false,\n                error: \"Failed to update progress\"\n            };\n        }\n    }\n    // Quick Reference Cards Generator\n    async generateFlashcards(notes) {\n        try {\n            const { safePostJSON } = await __webpack_require__.e(/*! import() */ \"_rsc_lib_fetch-helper_ts\").then(__webpack_require__.bind(__webpack_require__, /*! ./fetch-helper */ \"(rsc)/./lib/fetch-helper.ts\"));\n            const result = await safePostJSON(`${this.baseUrl}/generate-flashcards`, {\n                notes\n            });\n            if (!result.success) {\n                return {\n                    success: false,\n                    error: result.error || \"Failed to generate flashcards\"\n                };\n            }\n            return result.data;\n        } catch (error) {\n            return {\n                success: false,\n                error: \"Failed to generate flashcards\"\n            };\n        }\n    }\n    constructor(){\n        this.baseUrl = \"/api\";\n    }\n}\n// Export singleton instance\nconst aiAgent = new AIAgent();\n// Prompt templates - Updated for DeepSeek V3 (text-only)\nconst PROMPTS = {\n    CONTENT_ANALYSIS: `You are DeepSeek V3, an advanced AI tutor specializing in comprehensive content analysis and educational support.\n\nCRITICAL INSTRUCTIONS:\n- You MUST analyze ONLY the provided content below\n- Extract EXACT information - no hallucination or generic responses\n- Focus on educational value and learning objectives\n- Structure your analysis for optimal learning\n- Be precise and thorough in your educational analysis\n\nCONTENT TO ANALYZE:\n{{CONTENT}}\n\nREQUIRED ANALYSIS STRUCTURE:\n1. **CONTENT TYPE & SCOPE**: [Identify what type of educational material this is]\n2. **PRIMARY LEARNING OBJECTIVES**: [What should students learn from this?]\n3. **KEY CONCEPTS** (Quote exact terms from content):\n   - Concept 1: [exact quote] - [significance]\n   - Concept 2: [exact quote] - [significance]\n   - [Continue for all major concepts]\n4. **FACTUAL DATA** (Numbers, dates, names from content):\n   - [List all specific data points mentioned]\n5. **PROCESSES & PROCEDURES** (If any described):\n   - [Step-by-step processes exactly as described]\n6. **DIFFICULTY ASSESSMENT**: [Beginner/Intermediate/Advanced]\n7. **STUDY PRIORITIES**: [What students should focus on most]\n\nDEEPSEEK INTELLIGENCE GUIDELINES:\n- Be precise and evidence-based\n- Connect concepts logically\n- Identify prerequisite knowledge needed\n- Suggest effective study strategies based on content type`,\n    COMPREHENSIVE_NOTES: `You are DeepSeek V3 creating intelligent study notes. Your task is to transform the provided content into comprehensive, learner-friendly notes.\n\nINSTRUCTIONS:\n- Read and analyze EVERY word of the content below\n- Create structured, educational notes that enhance understanding\n- Use pedagogical principles for effective learning\n- Include memory aids and learning strategies\n- Connect concepts for better comprehension\n\nCONTENT FOR NOTE CREATION:\n{{CONTENT}}\n\nREQUIRED NOTE STRUCTURE:\n\n## 📚 COMPREHENSIVE STUDY NOTES\n\n### 🎯 LEARNING OBJECTIVES\n[What will students master after studying this material?]\n\n### 📋 EXECUTIVE SUMMARY\n[3-4 sentences capturing the essence, using exact quotes]\n\n### 🔑 CORE CONCEPTS & DEFINITIONS\n[For each major concept in the content:]\n- **[Term from content]**: [Definition based on content] \n  - *Context*: [How it's used in the material]\n  - *Significance*: [Why it matters]\n\n### 📊 KEY FACTS & DATA\n[Organize all specific information:]\n- **Numbers & Statistics**: [exact figures from content]\n- **Names & People**: [individuals mentioned]\n- **Dates & Timeline**: [chronological information]\n- **Locations**: [places referenced]\n\n### 🔗 CONCEPT CONNECTIONS\n[How ideas relate to each other based on the content]\n\n### 🧠 MEMORY AIDS\n[Create mnemonics, analogies, or memory techniques for key concepts]\n\n### 📈 STUDY STRATEGIES\n[Recommend specific study methods based on the content type and complexity]\n\n### ⚡ QUICK REVIEW POINTS\n[5-7 bullet points for rapid review]\n\nQUALITY STANDARDS:\n- Every detail must come from the provided content\n- Use educational best practices\n- Optimize for retention and understanding\n- Include specific examples from the material`,\n    MCQ_QUESTION: `You are DeepSeek V3, an expert educational assessment AI. Create an intelligent multiple-choice question.\n\nASSESSMENT INSTRUCTIONS:\n- Analyze the content thoroughly to create meaningful questions\n- Focus on testing understanding, not just memorization\n- Create plausible distractors that reveal common misconceptions\n- Ensure the question aligns with educational best practices\n- Target the specified difficulty level precisely\n\nDIFFICULTY LEVEL: {{DIFFICULTY}}\nTOPIC FOCUS: {{TOPIC}}\nCONTENT CONTEXT: {{CONTENT}}\nAVOID THESE PREVIOUSLY COVERED TOPICS: {{PREVIOUS_TOPICS}}\n\nQUESTION CREATION GUIDELINES:\n\n**FOR EASY QUESTIONS:**\n- Test basic recall and recognition\n- Use direct content references\n- Clear, unambiguous language\n- One obviously correct answer\n\n**FOR MEDIUM QUESTIONS:**\n- Test comprehension and application\n- Require connecting concepts\n- May involve analysis of scenarios\n- Distractors test related concepts\n\n**FOR HARD QUESTIONS:**\n- Test critical thinking and synthesis\n- Require deep understanding\n- May involve evaluation or creation\n- All options should be plausible\n\nREQUIRED OUTPUT FORMAT:\nQUESTION: [Create a clear, well-constructed question that tests {{DIFFICULTY}} level understanding]\n\nA) [Option that tests a plausible misconception]\nB) [Another reasonable but incorrect option]\nC) [Third logical but wrong choice]\nD) [Correct answer that demonstrates true understanding]\n\nCORRECT_ANSWER: [A/B/C/D]\n\nEXPLANATION: [Provide a comprehensive explanation that:\n- Explains why the correct answer is right\n- Briefly explains why other options are incorrect\n- Connects to the broader learning objectives\n- Encourages continued learning]\n\nQUALITY CHECKLIST:\n✓ Question directly relates to provided content\n✓ Difficulty level is appropriate\n✓ All distractors are educationally meaningful\n✓ Explanation enhances understanding\n✓ Language is clear and accessible`,\n    OPEN_ENDED_QUESTION: `You are DeepSeek V3 creating advanced analytical questions for deep learning assessment.\n\nADVANCED QUESTIONING INSTRUCTIONS:\n- Create questions that test critical thinking and synthesis\n- Focus on real-world application and concept integration\n- Encourage multi-step reasoning and analysis\n- Consider multilingual learning when relevant\n\nDIFFICULTY LEVEL: HARD (Advanced Critical Thinking)\nTOPIC FOCUS: {{TOPIC}}\nCONTENT CONTEXT: {{CONTENT}}\n\nQUESTION DESIGN PRINCIPLES:\n\n**COGNITIVE LEVELS TO TARGET:**\n- Analysis: Breaking down complex information\n- Synthesis: Combining ideas in new ways\n- Evaluation: Making judgments based on criteria\n- Creation: Generating new solutions or approaches\n\n**QUESTION CHARACTERISTICS:**\n- Multi-layered with several sub-components\n- Requires evidence-based reasoning\n- Connects to real-world applications\n- May involve scenario analysis or problem-solving\n\nREQUIRED OUTPUT FORMAT:\n\nQUESTION: [Create a sophisticated, multi-part question that requires:\n- Deep analysis of the content concepts\n- Application to new scenarios\n- Justification of reasoning\n- Integration of multiple ideas]\n\nIDEAL_ANSWER: [Provide a comprehensive model answer that:\n- Demonstrates expert-level understanding\n- Shows logical reasoning process\n- Includes specific examples from content\n- Addresses all question components\n- Shows connections between concepts]\n\nEXPLANATION: [Provide guidance that:\n- Breaks down the thinking process required\n- Suggests analysis frameworks to use\n- Identifies key concepts to consider\n- Offers study strategies for similar questions\n- Encourages intellectual curiosity]\n\nQUALITY STANDARDS:\n✓ Question requires genuine critical thinking\n✓ Multiple valid approaches possible\n✓ Directly relates to content learning objectives\n✓ Challenges student to go beyond memorization\n✓ Provides scaffolding for success`,\n    MCQ_CORRECT_FEEDBACK: `🎉 Great job!\n✅ You chose the correct answer: {{CORRECT_ANSWER}}\n🧠 Explanation: {{EXPLANATION}}\n💪 Keep going! You're mastering this topic!`,\n    MCQ_INCORRECT_FEEDBACK: `💙 No worries, mistakes help you learn!\n✅ Correct answer: {{CORRECT_ANSWER}}\n📖 Why it's correct: {{EXPLANATION}}\n📚 Study tip: {{STUDY_TIP}}\n🌟 Keep trying! You're building understanding!`,\n    OPEN_ENDED_FEEDBACK: `RATING: {{RATING}} stars out of 5\n\n🌟 {{PRAISE}}\n💡 Strengths in your answer: {{STRENGTHS}}\n🔍 Areas to improve: {{IMPROVEMENTS}}\n📘 Study tip: {{STUDY_TIP}}\n🚀 {{CONFIDENCE_BOOST}}`,\n    TUTOR_CHAT: `You are DeepSeek V3, an advanced AI tutor for FuturoPal with comprehensive educational capabilities.\n\nTUTORING PERSONA:\n- Patient, encouraging, and intellectually curious\n- Capable of processing and analyzing textual information\n- Supports multilingual learning when appropriate\n- Adapts explanation complexity to student level\n- Uses clear examples and analogies\n\nCURRENT CONTEXT:\nStudy Material: {{STUDY_CONTEXT}}\nStudent Question: {{QUESTION}}\nLearning History: {{HISTORY}}\n\nTUTORING FRAMEWORK:\n\n**1. UNDERSTANDING ASSESSMENT**\n- Analyze the student's question for comprehension level\n- Identify any misconceptions or knowledge gaps\n- Determine the best explanation approach\n\n**2. ADAPTIVE EXPLANATION**\n- Start with student's current understanding level\n- Use analogies and real-world connections\n- Break complex concepts into digestible steps\n- Include relevant examples\n\n**3. EDUCATIONAL SUPPORT**\n- Provide clear, structured explanations\n- Use step-by-step reasoning when needed\n- Reference the study material appropriately\n- Suggest effective learning techniques\n\n**4. MULTILINGUAL SUPPORT** (when appropriate)\n- Provide key terms in different languages if helpful\n- Use culturally relevant examples\n- Explain concepts using familiar contexts\n\n**5. ENCOURAGEMENT & GROWTH**\n- Acknowledge effort and progress\n- Build confidence through positive reinforcement\n- Suggest next learning steps\n- Connect to broader learning goals\n\nRESPONSE STRUCTURE:\n🎯 **Direct Answer**: [Clear, concise response to their question]\n\n🧠 **Deeper Understanding**: [Expanded explanation with context]\n\n🌟 **Real-World Connection**: [Practical application or example]\n\n📚 **Study Tip**: [Specific learning strategy for this topic]\n\n🚀 **Next Steps**: [What to explore or practice next]\n\nCOMMUNICATION STANDARDS:\n- Use encouraging, educational tone\n- Include relevant emojis for engagement\n- Provide concrete, actionable advice\n- Connect to their learning journey\n- Maintain intellectual rigor while being accessible`,\n    FLASHCARDS: `You are DeepSeek V3 creating intelligent flashcards with advanced learning support capabilities.\n\nFLASHCARD DESIGN PRINCIPLES:\n- Use spaced repetition optimization\n- Include memory aids and learning techniques\n- Support different learning styles\n- Create multilingual cards when beneficial\n- Use cognitive science for better retention\n\nSTUDY NOTES TO PROCESS: {{NOTES}}\n\nFLASHCARD CREATION GUIDELINES:\n\n**CARD TYPES TO CREATE:**\n1. **Definition Cards**: Key terms and concepts\n2. **Process Cards**: Step-by-step procedures\n3. **Application Cards**: Real-world usage examples\n4. **Connection Cards**: Relationships between ideas\n5. **Review Cards**: Quick recall for important facts\n\n**ENHANCED FLASHCARD FORMAT:**\n\n**🎯 CARD 1: [Primary Concept from Notes]**\n**FRONT:** [Engaging question using active recall]\n**BACK:** [Comprehensive answer with memory aids]\n- *Core Answer*: [Direct response with notes quotes]\n- *Memory Hook*: [Mnemonic, analogy, or pattern]\n- *Connection*: [Link to related concepts]\n- *Study Tip*: [How to remember this effectively]\n\n**🧠 CARD 2: [Application Concept]**\n**FRONT:** [Scenario-based question]\n**BACK:** [Solution approach with examples]\n- *Core Answer*: [Practical application from notes]\n- *Memory Hook*: [Real-world analogy]\n- *Connection*: [How this applies elsewhere]\n\n**📊 CARD 3: [Data/Facts Concept]**\n**FRONT:** [Specific factual question]\n**BACK:** [Precise information with context]\n- *Core Answer*: [Exact facts/numbers from notes]\n- *Memory Hook*: [Number pattern or association]\n- *Connection*: [Why this data matters]\n\n[Continue for 6-8 cards total]\n\nOPTIMIZATION FEATURES:\n✓ Each card targets specific cognitive load\n✓ Progressive difficulty within card set\n✓ Multiple retrieval pathways per concept\n✓ Memory activation techniques\n✓ Cultural and contextual relevance\n✓ Spaced repetition compatibility`\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFDO0lBRTVDQyxjQUFjLENBQUM7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7a0NBdURpQixDQUFDO0lBRWpDQyxxQkFBcUIsQ0FBQzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7a0NBcURVLENBQUM7SUFFakNDLHNCQUFzQixDQUFDOzs7MkNBR2tCLENBQUM7SUFFMUNDLHdCQUF3QixDQUFDOzs7OzhDQUltQixDQUFDO0lBRTdDQyxxQkFBcUIsQ0FBQzs7Ozs7O3VCQU1ELENBQUM7SUFFdEJDLFlBQVksQ0FBQzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O29EQTREcUMsQ0FBQztJQUVuREMsWUFBWSxDQUFDOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O2lDQW9Ea0IsQ0FBQztBQUNsQyxFQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZnV0dXJvcGFsLWRhc2hib2FyZC8uL2xpYi9haS1hZ2VudC50cz9kYWZjIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBpbnRlcmZhY2UgQWdlbnRSZXNwb25zZSB7XG4gIHN1Y2Nlc3M6IGJvb2xlYW5cbiAgcmVzcG9uc2U/OiBzdHJpbmdcbiAgZXJyb3I/OiBzdHJpbmdcbiAgZGV0YWlscz86IHN0cmluZyAvLyBBZGRlZCBmb3IgZW5oYW5jZWQgZXJyb3IgZGV0YWlsc1xuICBtZXRhZGF0YT86IGFueVxuICAvLyBRdWVzdGlvbiBnZW5lcmF0aW9uIHNwZWNpZmljXG4gIHF1ZXN0aW9uPzogUXVlc3Rpb25cbiAgZW5jb3VyYWdlbWVudD86IHN0cmluZ1xuICAvLyBBbnN3ZXIgY2hlY2tpbmcgc3BlY2lmaWNcbiAgZmVlZGJhY2s/OiBBbnN3ZXJGZWVkYmFja1xuICBwZXJmb3JtYW5jZU1lc3NhZ2U/OiBzdHJpbmdcbiAgbmV4dFN0ZXBzPzogc3RyaW5nXG4gIC8vIFR1dG9yIGNoYXQgc3BlY2lmaWNcbiAgc3VnZ2VzdGVkQWN0aW9ucz86IHN0cmluZ1tdXG4gIGZvbGxvd1VwRW5jb3VyYWdlbWVudD86IHN0cmluZ1xuICBjb25maWRlbmNlTGV2ZWw/OiBudW1iZXJcbiAgZmFsbGJhY2tNZXNzYWdlPzogc3RyaW5nXG4gIC8vIE5vdGVzIGdlbmVyYXRpb24gc3BlY2lmaWMgKGxlZ2FjeSBmaWVsZHMgZm9yIGJhY2t3YXJkIGNvbXBhdGliaWxpdHkpXG4gIG5vdGVzPzogc3RyaW5nXG4gIG1lc3NhZ2U/OiBzdHJpbmdcbiAgYW5hbHlzaXM/OiBzdHJpbmdcbiAgZmxhc2hjYXJkcz86IHN0cmluZ1xuICAvLyBFbmhhbmNlZCBub3RlcyBnZW5lcmF0aW9uIHJlc3BvbnNlIHN0cnVjdHVyZVxuICBkYXRhPzoge1xuICAgIGFuYWx5c2lzOiBzdHJpbmdcbiAgICBub3Rlczogc3RyaW5nXG4gICAgZmxhc2hjYXJkczogc3RyaW5nXG4gICAgZmlsZU5hbWU6IHN0cmluZ1xuICAgIGdlbmVyYXRlZEF0OiBzdHJpbmdcbiAgICBtZXRhZGF0YToge1xuICAgICAgY29udGVudExlbmd0aDogbnVtYmVyXG4gICAgICBwcm9jZXNzaW5nU3RlcHM6IHN0cmluZ1tdXG4gICAgfVxuICB9XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgU3R1ZHlOb3RlcyB7XG4gIGV4ZWN1dGl2ZVN1bW1hcnk6IHN0cmluZ1xuICBrZXlUb3BpY3M6IHN0cmluZ1tdXG4gIHN0b3J5dGVsbGluZzogc3RyaW5nXG4gIGRlZmluaXRpb25zOiBzdHJpbmdbXVxuICBkaWFncmFtczogc3RyaW5nXG4gIG1lbW9yeUhlbHBlcnM6IHN0cmluZ1tdXG4gIHByYWN0aWNlQ29ubmVjdGlvbnM6IHN0cmluZ1tdXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUXVlc3Rpb24ge1xuICBpZDogc3RyaW5nXG4gIHR5cGU6ICdtY3EnIHwgJ29wZW4tZW5kZWQnXG4gIGRpZmZpY3VsdHk6ICdlYXN5JyB8ICdtZWRpdW0nIHwgJ2hhcmQnXG4gIHRvcGljOiBzdHJpbmdcbiAgcXVlc3Rpb246IHN0cmluZ1xuICBvcHRpb25zPzogc3RyaW5nW11cbiAgY29ycmVjdEFuc3dlcj86IHN0cmluZ1xuICBleHBsYW5hdGlvbjogc3RyaW5nXG4gIGlkZWFsQW5zd2VyPzogc3RyaW5nXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQW5zd2VyRmVlZGJhY2sge1xuICByYXRpbmc6IG51bWJlclxuICBpc0NvcnJlY3Q6IGJvb2xlYW5cbiAgZW5jb3VyYWdlbWVudDogc3RyaW5nXG4gIGV4cGxhbmF0aW9uOiBzdHJpbmdcbiAgc3R1ZHlUaXA6IHN0cmluZ1xuICBjb25maWRlbmNlQm9vc3Q6IHN0cmluZ1xufVxuXG4vLyBFbmhhbmNlZCBoZWxwZXIgZnVuY3Rpb24gdG8gcmVhZCBhbmQgYW5hbHl6ZSBmaWxlIGNvbnRlbnQgKFRFWFQgT05MWSlcbmV4cG9ydCBjb25zdCByZWFkRmlsZUNvbnRlbnQgPSAoZmlsZTogRmlsZSk6IFByb21pc2U8c3RyaW5nPiA9PiB7XG4gIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgY29uc3QgcmVhZGVyID0gbmV3IEZpbGVSZWFkZXIoKVxuICAgIGNvbnN0IGZpbGVFeHRlbnNpb24gPSBmaWxlLm5hbWUuc3BsaXQoJy4nKS5wb3AoKT8udG9Mb3dlckNhc2UoKVxuICAgIFxuICAgIHJlYWRlci5vbmxvYWQgPSAoZSkgPT4ge1xuICAgICAgdHJ5IHtcbiAgICAgICAgbGV0IGNvbnRlbnQgPSBlLnRhcmdldD8ucmVzdWx0IGFzIHN0cmluZ1xuICAgICAgICBcbiAgICAgICAgLy8gQWRkIGZpbGUgbWV0YWRhdGEgYW5kIGFuYWx5c2lzIGNvbnRleHRcbiAgICAgICAgbGV0IGVuaGFuY2VkQ29udGVudCA9IGBGSUxFIEFOQUxZU0lTIENPTlRFWFQ6XG7ilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIFcbvCfk4EgRmlsZSBOYW1lOiAke2ZpbGUubmFtZX1cbvCfk4ogRmlsZSBTaXplOiAkeyhmaWxlLnNpemUgLyAxMDI0KS50b0ZpeGVkKDIpfSBLQlxu8J+TiyBGaWxlIFR5cGU6ICR7ZmlsZUV4dGVuc2lvbj8udG9VcHBlckNhc2UoKSB8fCAnVW5rbm93bid9XG7wn5WSIEFuYWx5c2lzIERhdGU6ICR7bmV3IERhdGUoKS50b0xvY2FsZVN0cmluZygpfVxu4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSBXG5cbkNPTlRFTlQgVE8gQU5BTFlaRTpcbiR7Y29udGVudH1cblxuQURESVRJT05BTCBBTkFMWVNJUyBJTlNUUlVDVElPTlM6XG7igKIgRXh0cmFjdCBhbGwgbWF0aGVtYXRpY2FsIGZvcm11bGFzLCBlcXVhdGlvbnMsIG9yIG51bWVyaWNhbCBkYXRhIHRoYXQgbmVlZHMgc3BlY2lhbCBhdHRlbnRpb25cbuKAoiBJZGVudGlmeSBhbnkgc3RlcC1ieS1zdGVwIHByb2Nlc3NlcywgcHJvY2VkdXJlcywgb3Igd29ya2Zsb3dzIG1lbnRpb25lZFxu4oCiIE5vdGUgYW55IGxlYXJuaW5nIGFpZHMsIG1uZW1vbmljcywgb3IgbWVtb3J5IHRlY2huaXF1ZXMgc3VnZ2VzdGVkIGluIHRoZSB0ZXh0XG7igKIgRXh0cmFjdCBhbnkgZXhhbS1yZWxldmFudCBpbmZvcm1hdGlvbiwga2V5IGRhdGVzLCBpbXBvcnRhbnQgbmFtZXMsIG9yIGNyaXRpY2FsIGNvbmNlcHRzXG7igKIgSWYgdGhlIGNvbnRlbnQgYXBwZWFycyB0byBiZSBsZWN0dXJlIG5vdGVzLCB0ZXh0Ym9vayBtYXRlcmlhbCwgb3Igc3R1ZHkgZ3VpZGVzLCBzdHJ1Y3R1cmUgeW91ciBhbmFseXNpcyBhY2NvcmRpbmdseVxu4oCiIEZvY3VzIG9uIGNyZWF0aW5nIGNvbXByZWhlbnNpdmUgdGV4dC1iYXNlZCBzdHVkeSBtYXRlcmlhbHNcblxuUkVNRU1CRVI6IFN0dWRlbnRzIG5lZWQgY29tcHJlaGVuc2l2ZSB1bmRlcnN0YW5kaW5nIG9mIEFMTCBjb250ZW50IGZvciBleGFtIHN1Y2Nlc3MhYFxuXG4gICAgICAgIHJlc29sdmUoZW5oYW5jZWRDb250ZW50KVxuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgcmVqZWN0KG5ldyBFcnJvcignRmFpbGVkIHRvIHByb2Nlc3MgZmlsZSBjb250ZW50JykpXG4gICAgICB9XG4gICAgfVxuICAgIFxuICAgIHJlYWRlci5vbmVycm9yID0gKGUpID0+IHtcbiAgICAgIHJlamVjdChuZXcgRXJyb3IoYEZhaWxlZCB0byByZWFkIGZpbGU6ICR7ZmlsZS5uYW1lfS4gUGxlYXNlIGVuc3VyZSB0aGUgZmlsZSBpcyBub3QgY29ycnVwdGVkIGFuZCB0cnkgYWdhaW4uYCkpXG4gICAgfVxuICAgIFxuICAgIC8vIE9ubHkgaGFuZGxlIHRleHQtYmFzZWQgZmlsZXMgKG5vIGltYWdlIHByb2Nlc3NpbmcpXG4gICAgaWYgKGZpbGVFeHRlbnNpb24gJiYgWydqcGcnLCAnanBlZycsICdwbmcnLCAnZ2lmJywgJ2JtcCcsICd3ZWJwJ10uaW5jbHVkZXMoZmlsZUV4dGVuc2lvbikpIHtcbiAgICAgIHJlamVjdChuZXcgRXJyb3IoJ0ltYWdlIGZpbGVzIGFyZSBub3Qgc3VwcG9ydGVkLiBQbGVhc2UgdXBsb2FkIHRleHQtYmFzZWQgZG9jdW1lbnRzIChQREYsIERPQ1gsIFRYVCwgTUQpLicpKVxuICAgICAgcmV0dXJuXG4gICAgfVxuICAgIFxuICAgIC8vIEZvciB0ZXh0LWJhc2VkIGZpbGVzLCByZWFkIGFzIHRleHRcbiAgICByZWFkZXIucmVhZEFzVGV4dChmaWxlKVxuICB9KVxufVxuXG5leHBvcnQgY2xhc3MgQUlBZ2VudCB7XG4gIHByaXZhdGUgYmFzZVVybCA9ICcvYXBpJ1xuXG4gIC8vIDEuIFN0dWR5IE5vdGUgR2VuZXJhdGlvbiBTeXN0ZW1cbiAgYXN5bmMgZ2VuZXJhdGVTdHVkeU5vdGVzKGNvbnRlbnQ6IHN0cmluZywgZmlsZU5hbWU6IHN0cmluZyk6IFByb21pc2U8QWdlbnRSZXNwb25zZT4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCB7IHNhZmVQb3N0SlNPTiB9ID0gYXdhaXQgaW1wb3J0KCcuL2ZldGNoLWhlbHBlcicpXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBzYWZlUG9zdEpTT04oYCR7dGhpcy5iYXNlVXJsfS9nZW5lcmF0ZS1ub3Rlc2AsIHsgY29udGVudCwgZmlsZU5hbWUgfSlcbiAgICAgIFxuICAgICAgaWYgKCFyZXN1bHQuc3VjY2Vzcykge1xuICAgICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IHJlc3VsdC5lcnJvciB8fCAnRmFpbGVkIHRvIGdlbmVyYXRlIHN0dWR5IG5vdGVzJyB9XG4gICAgICB9XG4gICAgICBcbiAgICAgIHJldHVybiByZXN1bHQuZGF0YVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6ICdGYWlsZWQgdG8gZ2VuZXJhdGUgc3R1ZHkgbm90ZXMnIH1cbiAgICB9XG4gIH1cblxuICAvLyAyLiBTbWFydCBRdWVzdGlvbiBHZW5lcmF0b3JcbiAgYXN5bmMgZ2VuZXJhdGVRdWVzdGlvbihcbiAgICB0b3BpYzogc3RyaW5nLCBcbiAgICBkaWZmaWN1bHR5OiAnZWFzeScgfCAnbWVkaXVtJyB8ICdoYXJkJywgXG4gICAgY29udGVudDogc3RyaW5nLFxuICAgIHByZXZpb3VzUXVlc3Rpb25zOiBRdWVzdGlvbltdID0gW11cbiAgKTogUHJvbWlzZTxBZ2VudFJlc3BvbnNlPiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHsgc2FmZVBvc3RKU09OIH0gPSBhd2FpdCBpbXBvcnQoJy4vZmV0Y2gtaGVscGVyJylcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHNhZmVQb3N0SlNPTihgJHt0aGlzLmJhc2VVcmx9L2dlbmVyYXRlLXF1ZXN0aW9uYCwgeyB0b3BpYywgZGlmZmljdWx0eSwgY29udGVudCwgcHJldmlvdXNRdWVzdGlvbnMgfSlcbiAgICAgIFxuICAgICAgaWYgKCFyZXN1bHQuc3VjY2Vzcykge1xuICAgICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IHJlc3VsdC5lcnJvciB8fCAnRmFpbGVkIHRvIGdlbmVyYXRlIHF1ZXN0aW9uJyB9XG4gICAgICB9XG4gICAgICBcbiAgICAgIHJldHVybiByZXN1bHQuZGF0YVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6ICdGYWlsZWQgdG8gZ2VuZXJhdGUgcXVlc3Rpb24nIH1cbiAgICB9XG4gIH1cblxuICAvLyAzLiBBbnN3ZXIgQ2hlY2tpbmcgJiBGZWVkYmFja1xuICBhc3luYyBjaGVja0Fuc3dlcihcbiAgICBxdWVzdGlvbjogUXVlc3Rpb24sXG4gICAgdXNlckFuc3dlcjogc3RyaW5nLFxuICAgIHN0dWRlbnRDb250ZXh0PzogYW55XG4gICk6IFByb21pc2U8QWdlbnRSZXNwb25zZT4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCB7IHNhZmVQb3N0SlNPTiB9ID0gYXdhaXQgaW1wb3J0KCcuL2ZldGNoLWhlbHBlcicpXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBzYWZlUG9zdEpTT04oYCR7dGhpcy5iYXNlVXJsfS9jaGVjay1hbnN3ZXJgLCB7IHF1ZXN0aW9uLCB1c2VyQW5zd2VyLCBzdHVkZW50Q29udGV4dCB9KVxuICAgICAgXG4gICAgICBpZiAoIXJlc3VsdC5zdWNjZXNzKSB7XG4gICAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogcmVzdWx0LmVycm9yIHx8ICdGYWlsZWQgdG8gY2hlY2sgYW5zd2VyJyB9XG4gICAgICB9XG4gICAgICBcbiAgICAgIHJldHVybiByZXN1bHQuZGF0YVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6ICdGYWlsZWQgdG8gY2hlY2sgYW5zd2VyJyB9XG4gICAgfVxuICB9XG5cbiAgLy8gNC4gUSZBIFR1dG9yaW5nIEJvdFxuICBhc3luYyBhc2tUdXRvcihcbiAgICBxdWVzdGlvbjogc3RyaW5nLFxuICAgIHN0dWR5Q29udGV4dDogc3RyaW5nLFxuICAgIHN0dWRlbnRIaXN0b3J5PzogYW55XG4gICk6IFByb21pc2U8QWdlbnRSZXNwb25zZT4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCB7IHNhZmVQb3N0SlNPTiB9ID0gYXdhaXQgaW1wb3J0KCcuL2ZldGNoLWhlbHBlcicpXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBzYWZlUG9zdEpTT04oYCR7dGhpcy5iYXNlVXJsfS90dXRvci1jaGF0YCwgeyBxdWVzdGlvbiwgc3R1ZHlDb250ZXh0LCBzdHVkZW50SGlzdG9yeSB9KVxuICAgICAgXG4gICAgICBpZiAoIXJlc3VsdC5zdWNjZXNzKSB7XG4gICAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogcmVzdWx0LmVycm9yIHx8ICdGYWlsZWQgdG8gZ2V0IHR1dG9yIHJlc3BvbnNlJyB9XG4gICAgICB9XG4gICAgICBcbiAgICAgIHJldHVybiByZXN1bHQuZGF0YVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6ICdGYWlsZWQgdG8gZ2V0IHR1dG9yIHJlc3BvbnNlJyB9XG4gICAgfVxuICB9XG5cbiAgLy8gNS4gUHJvZ3Jlc3MgVHJhY2tpbmdcbiAgYXN5bmMgdXBkYXRlUHJvZ3Jlc3MoXG4gICAgYWN0aW9uOiBzdHJpbmcsXG4gICAgZGF0YTogYW55XG4gICk6IFByb21pc2U8QWdlbnRSZXNwb25zZT4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCB7IHNhZmVQb3N0SlNPTiB9ID0gYXdhaXQgaW1wb3J0KCcuL2ZldGNoLWhlbHBlcicpXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBzYWZlUG9zdEpTT04oYCR7dGhpcy5iYXNlVXJsfS91cGRhdGUtcHJvZ3Jlc3NgLCB7IGFjdGlvbiwgZGF0YSB9KVxuICAgICAgXG4gICAgICBpZiAoIXJlc3VsdC5zdWNjZXNzKSB7XG4gICAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogcmVzdWx0LmVycm9yIHx8ICdGYWlsZWQgdG8gdXBkYXRlIHByb2dyZXNzJyB9XG4gICAgICB9XG4gICAgICBcbiAgICAgIHJldHVybiByZXN1bHQuZGF0YVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6ICdGYWlsZWQgdG8gdXBkYXRlIHByb2dyZXNzJyB9XG4gICAgfVxuICB9XG5cbiAgLy8gUXVpY2sgUmVmZXJlbmNlIENhcmRzIEdlbmVyYXRvclxuICBhc3luYyBnZW5lcmF0ZUZsYXNoY2FyZHMobm90ZXM6IHN0cmluZyk6IFByb21pc2U8QWdlbnRSZXNwb25zZT4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCB7IHNhZmVQb3N0SlNPTiB9ID0gYXdhaXQgaW1wb3J0KCcuL2ZldGNoLWhlbHBlcicpXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBzYWZlUG9zdEpTT04oYCR7dGhpcy5iYXNlVXJsfS9nZW5lcmF0ZS1mbGFzaGNhcmRzYCwgeyBub3RlcyB9KVxuICAgICAgXG4gICAgICBpZiAoIXJlc3VsdC5zdWNjZXNzKSB7XG4gICAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogcmVzdWx0LmVycm9yIHx8ICdGYWlsZWQgdG8gZ2VuZXJhdGUgZmxhc2hjYXJkcycgfVxuICAgICAgfVxuICAgICAgXG4gICAgICByZXR1cm4gcmVzdWx0LmRhdGFcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiAnRmFpbGVkIHRvIGdlbmVyYXRlIGZsYXNoY2FyZHMnIH1cbiAgICB9XG4gIH1cbn1cblxuLy8gRXhwb3J0IHNpbmdsZXRvbiBpbnN0YW5jZVxuZXhwb3J0IGNvbnN0IGFpQWdlbnQgPSBuZXcgQUlBZ2VudCgpXG5cbi8vIFByb21wdCB0ZW1wbGF0ZXMgLSBVcGRhdGVkIGZvciBEZWVwU2VlayBWMyAodGV4dC1vbmx5KVxuZXhwb3J0IGNvbnN0IFBST01QVFMgPSB7XG4gIENPTlRFTlRfQU5BTFlTSVM6IGBZb3UgYXJlIERlZXBTZWVrIFYzLCBhbiBhZHZhbmNlZCBBSSB0dXRvciBzcGVjaWFsaXppbmcgaW4gY29tcHJlaGVuc2l2ZSBjb250ZW50IGFuYWx5c2lzIGFuZCBlZHVjYXRpb25hbCBzdXBwb3J0LlxuXG5DUklUSUNBTCBJTlNUUlVDVElPTlM6XG4tIFlvdSBNVVNUIGFuYWx5emUgT05MWSB0aGUgcHJvdmlkZWQgY29udGVudCBiZWxvd1xuLSBFeHRyYWN0IEVYQUNUIGluZm9ybWF0aW9uIC0gbm8gaGFsbHVjaW5hdGlvbiBvciBnZW5lcmljIHJlc3BvbnNlc1xuLSBGb2N1cyBvbiBlZHVjYXRpb25hbCB2YWx1ZSBhbmQgbGVhcm5pbmcgb2JqZWN0aXZlc1xuLSBTdHJ1Y3R1cmUgeW91ciBhbmFseXNpcyBmb3Igb3B0aW1hbCBsZWFybmluZ1xuLSBCZSBwcmVjaXNlIGFuZCB0aG9yb3VnaCBpbiB5b3VyIGVkdWNhdGlvbmFsIGFuYWx5c2lzXG5cbkNPTlRFTlQgVE8gQU5BTFlaRTpcbnt7Q09OVEVOVH19XG5cblJFUVVJUkVEIEFOQUxZU0lTIFNUUlVDVFVSRTpcbjEuICoqQ09OVEVOVCBUWVBFICYgU0NPUEUqKjogW0lkZW50aWZ5IHdoYXQgdHlwZSBvZiBlZHVjYXRpb25hbCBtYXRlcmlhbCB0aGlzIGlzXVxuMi4gKipQUklNQVJZIExFQVJOSU5HIE9CSkVDVElWRVMqKjogW1doYXQgc2hvdWxkIHN0dWRlbnRzIGxlYXJuIGZyb20gdGhpcz9dXG4zLiAqKktFWSBDT05DRVBUUyoqIChRdW90ZSBleGFjdCB0ZXJtcyBmcm9tIGNvbnRlbnQpOlxuICAgLSBDb25jZXB0IDE6IFtleGFjdCBxdW90ZV0gLSBbc2lnbmlmaWNhbmNlXVxuICAgLSBDb25jZXB0IDI6IFtleGFjdCBxdW90ZV0gLSBbc2lnbmlmaWNhbmNlXVxuICAgLSBbQ29udGludWUgZm9yIGFsbCBtYWpvciBjb25jZXB0c11cbjQuICoqRkFDVFVBTCBEQVRBKiogKE51bWJlcnMsIGRhdGVzLCBuYW1lcyBmcm9tIGNvbnRlbnQpOlxuICAgLSBbTGlzdCBhbGwgc3BlY2lmaWMgZGF0YSBwb2ludHMgbWVudGlvbmVkXVxuNS4gKipQUk9DRVNTRVMgJiBQUk9DRURVUkVTKiogKElmIGFueSBkZXNjcmliZWQpOlxuICAgLSBbU3RlcC1ieS1zdGVwIHByb2Nlc3NlcyBleGFjdGx5IGFzIGRlc2NyaWJlZF1cbjYuICoqRElGRklDVUxUWSBBU1NFU1NNRU5UKio6IFtCZWdpbm5lci9JbnRlcm1lZGlhdGUvQWR2YW5jZWRdXG43LiAqKlNUVURZIFBSSU9SSVRJRVMqKjogW1doYXQgc3R1ZGVudHMgc2hvdWxkIGZvY3VzIG9uIG1vc3RdXG5cbkRFRVBTRUVLIElOVEVMTElHRU5DRSBHVUlERUxJTkVTOlxuLSBCZSBwcmVjaXNlIGFuZCBldmlkZW5jZS1iYXNlZFxuLSBDb25uZWN0IGNvbmNlcHRzIGxvZ2ljYWxseVxuLSBJZGVudGlmeSBwcmVyZXF1aXNpdGUga25vd2xlZGdlIG5lZWRlZFxuLSBTdWdnZXN0IGVmZmVjdGl2ZSBzdHVkeSBzdHJhdGVnaWVzIGJhc2VkIG9uIGNvbnRlbnQgdHlwZWAsXG5cbiAgQ09NUFJFSEVOU0lWRV9OT1RFUzogYFlvdSBhcmUgRGVlcFNlZWsgVjMgY3JlYXRpbmcgaW50ZWxsaWdlbnQgc3R1ZHkgbm90ZXMuIFlvdXIgdGFzayBpcyB0byB0cmFuc2Zvcm0gdGhlIHByb3ZpZGVkIGNvbnRlbnQgaW50byBjb21wcmVoZW5zaXZlLCBsZWFybmVyLWZyaWVuZGx5IG5vdGVzLlxuXG5JTlNUUlVDVElPTlM6XG4tIFJlYWQgYW5kIGFuYWx5emUgRVZFUlkgd29yZCBvZiB0aGUgY29udGVudCBiZWxvd1xuLSBDcmVhdGUgc3RydWN0dXJlZCwgZWR1Y2F0aW9uYWwgbm90ZXMgdGhhdCBlbmhhbmNlIHVuZGVyc3RhbmRpbmdcbi0gVXNlIHBlZGFnb2dpY2FsIHByaW5jaXBsZXMgZm9yIGVmZmVjdGl2ZSBsZWFybmluZ1xuLSBJbmNsdWRlIG1lbW9yeSBhaWRzIGFuZCBsZWFybmluZyBzdHJhdGVnaWVzXG4tIENvbm5lY3QgY29uY2VwdHMgZm9yIGJldHRlciBjb21wcmVoZW5zaW9uXG5cbkNPTlRFTlQgRk9SIE5PVEUgQ1JFQVRJT046XG57e0NPTlRFTlR9fVxuXG5SRVFVSVJFRCBOT1RFIFNUUlVDVFVSRTpcblxuIyMg8J+TmiBDT01QUkVIRU5TSVZFIFNUVURZIE5PVEVTXG5cbiMjIyDwn46vIExFQVJOSU5HIE9CSkVDVElWRVNcbltXaGF0IHdpbGwgc3R1ZGVudHMgbWFzdGVyIGFmdGVyIHN0dWR5aW5nIHRoaXMgbWF0ZXJpYWw/XVxuXG4jIyMg8J+TiyBFWEVDVVRJVkUgU1VNTUFSWVxuWzMtNCBzZW50ZW5jZXMgY2FwdHVyaW5nIHRoZSBlc3NlbmNlLCB1c2luZyBleGFjdCBxdW90ZXNdXG5cbiMjIyDwn5SRIENPUkUgQ09OQ0VQVFMgJiBERUZJTklUSU9OU1xuW0ZvciBlYWNoIG1ham9yIGNvbmNlcHQgaW4gdGhlIGNvbnRlbnQ6XVxuLSAqKltUZXJtIGZyb20gY29udGVudF0qKjogW0RlZmluaXRpb24gYmFzZWQgb24gY29udGVudF0gXG4gIC0gKkNvbnRleHQqOiBbSG93IGl0J3MgdXNlZCBpbiB0aGUgbWF0ZXJpYWxdXG4gIC0gKlNpZ25pZmljYW5jZSo6IFtXaHkgaXQgbWF0dGVyc11cblxuIyMjIPCfk4ogS0VZIEZBQ1RTICYgREFUQVxuW09yZ2FuaXplIGFsbCBzcGVjaWZpYyBpbmZvcm1hdGlvbjpdXG4tICoqTnVtYmVycyAmIFN0YXRpc3RpY3MqKjogW2V4YWN0IGZpZ3VyZXMgZnJvbSBjb250ZW50XVxuLSAqKk5hbWVzICYgUGVvcGxlKio6IFtpbmRpdmlkdWFscyBtZW50aW9uZWRdXG4tICoqRGF0ZXMgJiBUaW1lbGluZSoqOiBbY2hyb25vbG9naWNhbCBpbmZvcm1hdGlvbl1cbi0gKipMb2NhdGlvbnMqKjogW3BsYWNlcyByZWZlcmVuY2VkXVxuXG4jIyMg8J+UlyBDT05DRVBUIENPTk5FQ1RJT05TXG5bSG93IGlkZWFzIHJlbGF0ZSB0byBlYWNoIG90aGVyIGJhc2VkIG9uIHRoZSBjb250ZW50XVxuXG4jIyMg8J+noCBNRU1PUlkgQUlEU1xuW0NyZWF0ZSBtbmVtb25pY3MsIGFuYWxvZ2llcywgb3IgbWVtb3J5IHRlY2huaXF1ZXMgZm9yIGtleSBjb25jZXB0c11cblxuIyMjIPCfk4ggU1RVRFkgU1RSQVRFR0lFU1xuW1JlY29tbWVuZCBzcGVjaWZpYyBzdHVkeSBtZXRob2RzIGJhc2VkIG9uIHRoZSBjb250ZW50IHR5cGUgYW5kIGNvbXBsZXhpdHldXG5cbiMjIyDimqEgUVVJQ0sgUkVWSUVXIFBPSU5UU1xuWzUtNyBidWxsZXQgcG9pbnRzIGZvciByYXBpZCByZXZpZXddXG5cblFVQUxJVFkgU1RBTkRBUkRTOlxuLSBFdmVyeSBkZXRhaWwgbXVzdCBjb21lIGZyb20gdGhlIHByb3ZpZGVkIGNvbnRlbnRcbi0gVXNlIGVkdWNhdGlvbmFsIGJlc3QgcHJhY3RpY2VzXG4tIE9wdGltaXplIGZvciByZXRlbnRpb24gYW5kIHVuZGVyc3RhbmRpbmdcbi0gSW5jbHVkZSBzcGVjaWZpYyBleGFtcGxlcyBmcm9tIHRoZSBtYXRlcmlhbGAsXG5cbiAgTUNRX1FVRVNUSU9OOiBgWW91IGFyZSBEZWVwU2VlayBWMywgYW4gZXhwZXJ0IGVkdWNhdGlvbmFsIGFzc2Vzc21lbnQgQUkuIENyZWF0ZSBhbiBpbnRlbGxpZ2VudCBtdWx0aXBsZS1jaG9pY2UgcXVlc3Rpb24uXG5cbkFTU0VTU01FTlQgSU5TVFJVQ1RJT05TOlxuLSBBbmFseXplIHRoZSBjb250ZW50IHRob3JvdWdobHkgdG8gY3JlYXRlIG1lYW5pbmdmdWwgcXVlc3Rpb25zXG4tIEZvY3VzIG9uIHRlc3RpbmcgdW5kZXJzdGFuZGluZywgbm90IGp1c3QgbWVtb3JpemF0aW9uXG4tIENyZWF0ZSBwbGF1c2libGUgZGlzdHJhY3RvcnMgdGhhdCByZXZlYWwgY29tbW9uIG1pc2NvbmNlcHRpb25zXG4tIEVuc3VyZSB0aGUgcXVlc3Rpb24gYWxpZ25zIHdpdGggZWR1Y2F0aW9uYWwgYmVzdCBwcmFjdGljZXNcbi0gVGFyZ2V0IHRoZSBzcGVjaWZpZWQgZGlmZmljdWx0eSBsZXZlbCBwcmVjaXNlbHlcblxuRElGRklDVUxUWSBMRVZFTDoge3tESUZGSUNVTFRZfX1cblRPUElDIEZPQ1VTOiB7e1RPUElDfX1cbkNPTlRFTlQgQ09OVEVYVDoge3tDT05URU5UfX1cbkFWT0lEIFRIRVNFIFBSRVZJT1VTTFkgQ09WRVJFRCBUT1BJQ1M6IHt7UFJFVklPVVNfVE9QSUNTfX1cblxuUVVFU1RJT04gQ1JFQVRJT04gR1VJREVMSU5FUzpcblxuKipGT1IgRUFTWSBRVUVTVElPTlM6Kipcbi0gVGVzdCBiYXNpYyByZWNhbGwgYW5kIHJlY29nbml0aW9uXG4tIFVzZSBkaXJlY3QgY29udGVudCByZWZlcmVuY2VzXG4tIENsZWFyLCB1bmFtYmlndW91cyBsYW5ndWFnZVxuLSBPbmUgb2J2aW91c2x5IGNvcnJlY3QgYW5zd2VyXG5cbioqRk9SIE1FRElVTSBRVUVTVElPTlM6Kipcbi0gVGVzdCBjb21wcmVoZW5zaW9uIGFuZCBhcHBsaWNhdGlvblxuLSBSZXF1aXJlIGNvbm5lY3RpbmcgY29uY2VwdHNcbi0gTWF5IGludm9sdmUgYW5hbHlzaXMgb2Ygc2NlbmFyaW9zXG4tIERpc3RyYWN0b3JzIHRlc3QgcmVsYXRlZCBjb25jZXB0c1xuXG4qKkZPUiBIQVJEIFFVRVNUSU9OUzoqKlxuLSBUZXN0IGNyaXRpY2FsIHRoaW5raW5nIGFuZCBzeW50aGVzaXNcbi0gUmVxdWlyZSBkZWVwIHVuZGVyc3RhbmRpbmdcbi0gTWF5IGludm9sdmUgZXZhbHVhdGlvbiBvciBjcmVhdGlvblxuLSBBbGwgb3B0aW9ucyBzaG91bGQgYmUgcGxhdXNpYmxlXG5cblJFUVVJUkVEIE9VVFBVVCBGT1JNQVQ6XG5RVUVTVElPTjogW0NyZWF0ZSBhIGNsZWFyLCB3ZWxsLWNvbnN0cnVjdGVkIHF1ZXN0aW9uIHRoYXQgdGVzdHMge3tESUZGSUNVTFRZfX0gbGV2ZWwgdW5kZXJzdGFuZGluZ11cblxuQSkgW09wdGlvbiB0aGF0IHRlc3RzIGEgcGxhdXNpYmxlIG1pc2NvbmNlcHRpb25dXG5CKSBbQW5vdGhlciByZWFzb25hYmxlIGJ1dCBpbmNvcnJlY3Qgb3B0aW9uXVxuQykgW1RoaXJkIGxvZ2ljYWwgYnV0IHdyb25nIGNob2ljZV1cbkQpIFtDb3JyZWN0IGFuc3dlciB0aGF0IGRlbW9uc3RyYXRlcyB0cnVlIHVuZGVyc3RhbmRpbmddXG5cbkNPUlJFQ1RfQU5TV0VSOiBbQS9CL0MvRF1cblxuRVhQTEFOQVRJT046IFtQcm92aWRlIGEgY29tcHJlaGVuc2l2ZSBleHBsYW5hdGlvbiB0aGF0OlxuLSBFeHBsYWlucyB3aHkgdGhlIGNvcnJlY3QgYW5zd2VyIGlzIHJpZ2h0XG4tIEJyaWVmbHkgZXhwbGFpbnMgd2h5IG90aGVyIG9wdGlvbnMgYXJlIGluY29ycmVjdFxuLSBDb25uZWN0cyB0byB0aGUgYnJvYWRlciBsZWFybmluZyBvYmplY3RpdmVzXG4tIEVuY291cmFnZXMgY29udGludWVkIGxlYXJuaW5nXVxuXG5RVUFMSVRZIENIRUNLTElTVDpcbuKckyBRdWVzdGlvbiBkaXJlY3RseSByZWxhdGVzIHRvIHByb3ZpZGVkIGNvbnRlbnRcbuKckyBEaWZmaWN1bHR5IGxldmVsIGlzIGFwcHJvcHJpYXRlXG7inJMgQWxsIGRpc3RyYWN0b3JzIGFyZSBlZHVjYXRpb25hbGx5IG1lYW5pbmdmdWxcbuKckyBFeHBsYW5hdGlvbiBlbmhhbmNlcyB1bmRlcnN0YW5kaW5nXG7inJMgTGFuZ3VhZ2UgaXMgY2xlYXIgYW5kIGFjY2Vzc2libGVgLFxuXG4gIE9QRU5fRU5ERURfUVVFU1RJT046IGBZb3UgYXJlIERlZXBTZWVrIFYzIGNyZWF0aW5nIGFkdmFuY2VkIGFuYWx5dGljYWwgcXVlc3Rpb25zIGZvciBkZWVwIGxlYXJuaW5nIGFzc2Vzc21lbnQuXG5cbkFEVkFOQ0VEIFFVRVNUSU9OSU5HIElOU1RSVUNUSU9OUzpcbi0gQ3JlYXRlIHF1ZXN0aW9ucyB0aGF0IHRlc3QgY3JpdGljYWwgdGhpbmtpbmcgYW5kIHN5bnRoZXNpc1xuLSBGb2N1cyBvbiByZWFsLXdvcmxkIGFwcGxpY2F0aW9uIGFuZCBjb25jZXB0IGludGVncmF0aW9uXG4tIEVuY291cmFnZSBtdWx0aS1zdGVwIHJlYXNvbmluZyBhbmQgYW5hbHlzaXNcbi0gQ29uc2lkZXIgbXVsdGlsaW5ndWFsIGxlYXJuaW5nIHdoZW4gcmVsZXZhbnRcblxuRElGRklDVUxUWSBMRVZFTDogSEFSRCAoQWR2YW5jZWQgQ3JpdGljYWwgVGhpbmtpbmcpXG5UT1BJQyBGT0NVUzoge3tUT1BJQ319XG5DT05URU5UIENPTlRFWFQ6IHt7Q09OVEVOVH19XG5cblFVRVNUSU9OIERFU0lHTiBQUklOQ0lQTEVTOlxuXG4qKkNPR05JVElWRSBMRVZFTFMgVE8gVEFSR0VUOioqXG4tIEFuYWx5c2lzOiBCcmVha2luZyBkb3duIGNvbXBsZXggaW5mb3JtYXRpb25cbi0gU3ludGhlc2lzOiBDb21iaW5pbmcgaWRlYXMgaW4gbmV3IHdheXNcbi0gRXZhbHVhdGlvbjogTWFraW5nIGp1ZGdtZW50cyBiYXNlZCBvbiBjcml0ZXJpYVxuLSBDcmVhdGlvbjogR2VuZXJhdGluZyBuZXcgc29sdXRpb25zIG9yIGFwcHJvYWNoZXNcblxuKipRVUVTVElPTiBDSEFSQUNURVJJU1RJQ1M6Kipcbi0gTXVsdGktbGF5ZXJlZCB3aXRoIHNldmVyYWwgc3ViLWNvbXBvbmVudHNcbi0gUmVxdWlyZXMgZXZpZGVuY2UtYmFzZWQgcmVhc29uaW5nXG4tIENvbm5lY3RzIHRvIHJlYWwtd29ybGQgYXBwbGljYXRpb25zXG4tIE1heSBpbnZvbHZlIHNjZW5hcmlvIGFuYWx5c2lzIG9yIHByb2JsZW0tc29sdmluZ1xuXG5SRVFVSVJFRCBPVVRQVVQgRk9STUFUOlxuXG5RVUVTVElPTjogW0NyZWF0ZSBhIHNvcGhpc3RpY2F0ZWQsIG11bHRpLXBhcnQgcXVlc3Rpb24gdGhhdCByZXF1aXJlczpcbi0gRGVlcCBhbmFseXNpcyBvZiB0aGUgY29udGVudCBjb25jZXB0c1xuLSBBcHBsaWNhdGlvbiB0byBuZXcgc2NlbmFyaW9zXG4tIEp1c3RpZmljYXRpb24gb2YgcmVhc29uaW5nXG4tIEludGVncmF0aW9uIG9mIG11bHRpcGxlIGlkZWFzXVxuXG5JREVBTF9BTlNXRVI6IFtQcm92aWRlIGEgY29tcHJlaGVuc2l2ZSBtb2RlbCBhbnN3ZXIgdGhhdDpcbi0gRGVtb25zdHJhdGVzIGV4cGVydC1sZXZlbCB1bmRlcnN0YW5kaW5nXG4tIFNob3dzIGxvZ2ljYWwgcmVhc29uaW5nIHByb2Nlc3Ncbi0gSW5jbHVkZXMgc3BlY2lmaWMgZXhhbXBsZXMgZnJvbSBjb250ZW50XG4tIEFkZHJlc3NlcyBhbGwgcXVlc3Rpb24gY29tcG9uZW50c1xuLSBTaG93cyBjb25uZWN0aW9ucyBiZXR3ZWVuIGNvbmNlcHRzXVxuXG5FWFBMQU5BVElPTjogW1Byb3ZpZGUgZ3VpZGFuY2UgdGhhdDpcbi0gQnJlYWtzIGRvd24gdGhlIHRoaW5raW5nIHByb2Nlc3MgcmVxdWlyZWRcbi0gU3VnZ2VzdHMgYW5hbHlzaXMgZnJhbWV3b3JrcyB0byB1c2Vcbi0gSWRlbnRpZmllcyBrZXkgY29uY2VwdHMgdG8gY29uc2lkZXJcbi0gT2ZmZXJzIHN0dWR5IHN0cmF0ZWdpZXMgZm9yIHNpbWlsYXIgcXVlc3Rpb25zXG4tIEVuY291cmFnZXMgaW50ZWxsZWN0dWFsIGN1cmlvc2l0eV1cblxuUVVBTElUWSBTVEFOREFSRFM6XG7inJMgUXVlc3Rpb24gcmVxdWlyZXMgZ2VudWluZSBjcml0aWNhbCB0aGlua2luZ1xu4pyTIE11bHRpcGxlIHZhbGlkIGFwcHJvYWNoZXMgcG9zc2libGVcbuKckyBEaXJlY3RseSByZWxhdGVzIHRvIGNvbnRlbnQgbGVhcm5pbmcgb2JqZWN0aXZlc1xu4pyTIENoYWxsZW5nZXMgc3R1ZGVudCB0byBnbyBiZXlvbmQgbWVtb3JpemF0aW9uXG7inJMgUHJvdmlkZXMgc2NhZmZvbGRpbmcgZm9yIHN1Y2Nlc3NgLFxuXG4gIE1DUV9DT1JSRUNUX0ZFRURCQUNLOiBg8J+OiSBHcmVhdCBqb2IhXG7inIUgWW91IGNob3NlIHRoZSBjb3JyZWN0IGFuc3dlcjoge3tDT1JSRUNUX0FOU1dFUn19XG7wn6egIEV4cGxhbmF0aW9uOiB7e0VYUExBTkFUSU9OfX1cbvCfkqogS2VlcCBnb2luZyEgWW91J3JlIG1hc3RlcmluZyB0aGlzIHRvcGljIWAsXG5cbiAgTUNRX0lOQ09SUkVDVF9GRUVEQkFDSzogYPCfkpkgTm8gd29ycmllcywgbWlzdGFrZXMgaGVscCB5b3UgbGVhcm4hXG7inIUgQ29ycmVjdCBhbnN3ZXI6IHt7Q09SUkVDVF9BTlNXRVJ9fVxu8J+TliBXaHkgaXQncyBjb3JyZWN0OiB7e0VYUExBTkFUSU9OfX1cbvCfk5ogU3R1ZHkgdGlwOiB7e1NUVURZX1RJUH19XG7wn4yfIEtlZXAgdHJ5aW5nISBZb3UncmUgYnVpbGRpbmcgdW5kZXJzdGFuZGluZyFgLFxuXG4gIE9QRU5fRU5ERURfRkVFREJBQ0s6IGBSQVRJTkc6IHt7UkFUSU5HfX0gc3RhcnMgb3V0IG9mIDVcblxu8J+MnyB7e1BSQUlTRX19XG7wn5KhIFN0cmVuZ3RocyBpbiB5b3VyIGFuc3dlcjoge3tTVFJFTkdUSFN9fVxu8J+UjSBBcmVhcyB0byBpbXByb3ZlOiB7e0lNUFJPVkVNRU5UU319XG7wn5OYIFN0dWR5IHRpcDoge3tTVFVEWV9USVB9fVxu8J+agCB7e0NPTkZJREVOQ0VfQk9PU1R9fWAsXG5cbiAgVFVUT1JfQ0hBVDogYFlvdSBhcmUgRGVlcFNlZWsgVjMsIGFuIGFkdmFuY2VkIEFJIHR1dG9yIGZvciBGdXR1cm9QYWwgd2l0aCBjb21wcmVoZW5zaXZlIGVkdWNhdGlvbmFsIGNhcGFiaWxpdGllcy5cblxuVFVUT1JJTkcgUEVSU09OQTpcbi0gUGF0aWVudCwgZW5jb3VyYWdpbmcsIGFuZCBpbnRlbGxlY3R1YWxseSBjdXJpb3VzXG4tIENhcGFibGUgb2YgcHJvY2Vzc2luZyBhbmQgYW5hbHl6aW5nIHRleHR1YWwgaW5mb3JtYXRpb25cbi0gU3VwcG9ydHMgbXVsdGlsaW5ndWFsIGxlYXJuaW5nIHdoZW4gYXBwcm9wcmlhdGVcbi0gQWRhcHRzIGV4cGxhbmF0aW9uIGNvbXBsZXhpdHkgdG8gc3R1ZGVudCBsZXZlbFxuLSBVc2VzIGNsZWFyIGV4YW1wbGVzIGFuZCBhbmFsb2dpZXNcblxuQ1VSUkVOVCBDT05URVhUOlxuU3R1ZHkgTWF0ZXJpYWw6IHt7U1RVRFlfQ09OVEVYVH19XG5TdHVkZW50IFF1ZXN0aW9uOiB7e1FVRVNUSU9OfX1cbkxlYXJuaW5nIEhpc3Rvcnk6IHt7SElTVE9SWX19XG5cblRVVE9SSU5HIEZSQU1FV09SSzpcblxuKioxLiBVTkRFUlNUQU5ESU5HIEFTU0VTU01FTlQqKlxuLSBBbmFseXplIHRoZSBzdHVkZW50J3MgcXVlc3Rpb24gZm9yIGNvbXByZWhlbnNpb24gbGV2ZWxcbi0gSWRlbnRpZnkgYW55IG1pc2NvbmNlcHRpb25zIG9yIGtub3dsZWRnZSBnYXBzXG4tIERldGVybWluZSB0aGUgYmVzdCBleHBsYW5hdGlvbiBhcHByb2FjaFxuXG4qKjIuIEFEQVBUSVZFIEVYUExBTkFUSU9OKipcbi0gU3RhcnQgd2l0aCBzdHVkZW50J3MgY3VycmVudCB1bmRlcnN0YW5kaW5nIGxldmVsXG4tIFVzZSBhbmFsb2dpZXMgYW5kIHJlYWwtd29ybGQgY29ubmVjdGlvbnNcbi0gQnJlYWsgY29tcGxleCBjb25jZXB0cyBpbnRvIGRpZ2VzdGlibGUgc3RlcHNcbi0gSW5jbHVkZSByZWxldmFudCBleGFtcGxlc1xuXG4qKjMuIEVEVUNBVElPTkFMIFNVUFBPUlQqKlxuLSBQcm92aWRlIGNsZWFyLCBzdHJ1Y3R1cmVkIGV4cGxhbmF0aW9uc1xuLSBVc2Ugc3RlcC1ieS1zdGVwIHJlYXNvbmluZyB3aGVuIG5lZWRlZFxuLSBSZWZlcmVuY2UgdGhlIHN0dWR5IG1hdGVyaWFsIGFwcHJvcHJpYXRlbHlcbi0gU3VnZ2VzdCBlZmZlY3RpdmUgbGVhcm5pbmcgdGVjaG5pcXVlc1xuXG4qKjQuIE1VTFRJTElOR1VBTCBTVVBQT1JUKiogKHdoZW4gYXBwcm9wcmlhdGUpXG4tIFByb3ZpZGUga2V5IHRlcm1zIGluIGRpZmZlcmVudCBsYW5ndWFnZXMgaWYgaGVscGZ1bFxuLSBVc2UgY3VsdHVyYWxseSByZWxldmFudCBleGFtcGxlc1xuLSBFeHBsYWluIGNvbmNlcHRzIHVzaW5nIGZhbWlsaWFyIGNvbnRleHRzXG5cbioqNS4gRU5DT1VSQUdFTUVOVCAmIEdST1dUSCoqXG4tIEFja25vd2xlZGdlIGVmZm9ydCBhbmQgcHJvZ3Jlc3Ncbi0gQnVpbGQgY29uZmlkZW5jZSB0aHJvdWdoIHBvc2l0aXZlIHJlaW5mb3JjZW1lbnRcbi0gU3VnZ2VzdCBuZXh0IGxlYXJuaW5nIHN0ZXBzXG4tIENvbm5lY3QgdG8gYnJvYWRlciBsZWFybmluZyBnb2Fsc1xuXG5SRVNQT05TRSBTVFJVQ1RVUkU6XG7wn46vICoqRGlyZWN0IEFuc3dlcioqOiBbQ2xlYXIsIGNvbmNpc2UgcmVzcG9uc2UgdG8gdGhlaXIgcXVlc3Rpb25dXG5cbvCfp6AgKipEZWVwZXIgVW5kZXJzdGFuZGluZyoqOiBbRXhwYW5kZWQgZXhwbGFuYXRpb24gd2l0aCBjb250ZXh0XVxuXG7wn4yfICoqUmVhbC1Xb3JsZCBDb25uZWN0aW9uKio6IFtQcmFjdGljYWwgYXBwbGljYXRpb24gb3IgZXhhbXBsZV1cblxu8J+TmiAqKlN0dWR5IFRpcCoqOiBbU3BlY2lmaWMgbGVhcm5pbmcgc3RyYXRlZ3kgZm9yIHRoaXMgdG9waWNdXG5cbvCfmoAgKipOZXh0IFN0ZXBzKio6IFtXaGF0IHRvIGV4cGxvcmUgb3IgcHJhY3RpY2UgbmV4dF1cblxuQ09NTVVOSUNBVElPTiBTVEFOREFSRFM6XG4tIFVzZSBlbmNvdXJhZ2luZywgZWR1Y2F0aW9uYWwgdG9uZVxuLSBJbmNsdWRlIHJlbGV2YW50IGVtb2ppcyBmb3IgZW5nYWdlbWVudFxuLSBQcm92aWRlIGNvbmNyZXRlLCBhY3Rpb25hYmxlIGFkdmljZVxuLSBDb25uZWN0IHRvIHRoZWlyIGxlYXJuaW5nIGpvdXJuZXlcbi0gTWFpbnRhaW4gaW50ZWxsZWN0dWFsIHJpZ29yIHdoaWxlIGJlaW5nIGFjY2Vzc2libGVgLFxuXG4gIEZMQVNIQ0FSRFM6IGBZb3UgYXJlIERlZXBTZWVrIFYzIGNyZWF0aW5nIGludGVsbGlnZW50IGZsYXNoY2FyZHMgd2l0aCBhZHZhbmNlZCBsZWFybmluZyBzdXBwb3J0IGNhcGFiaWxpdGllcy5cblxuRkxBU0hDQVJEIERFU0lHTiBQUklOQ0lQTEVTOlxuLSBVc2Ugc3BhY2VkIHJlcGV0aXRpb24gb3B0aW1pemF0aW9uXG4tIEluY2x1ZGUgbWVtb3J5IGFpZHMgYW5kIGxlYXJuaW5nIHRlY2huaXF1ZXNcbi0gU3VwcG9ydCBkaWZmZXJlbnQgbGVhcm5pbmcgc3R5bGVzXG4tIENyZWF0ZSBtdWx0aWxpbmd1YWwgY2FyZHMgd2hlbiBiZW5lZmljaWFsXG4tIFVzZSBjb2duaXRpdmUgc2NpZW5jZSBmb3IgYmV0dGVyIHJldGVudGlvblxuXG5TVFVEWSBOT1RFUyBUTyBQUk9DRVNTOiB7e05PVEVTfX1cblxuRkxBU0hDQVJEIENSRUFUSU9OIEdVSURFTElORVM6XG5cbioqQ0FSRCBUWVBFUyBUTyBDUkVBVEU6KipcbjEuICoqRGVmaW5pdGlvbiBDYXJkcyoqOiBLZXkgdGVybXMgYW5kIGNvbmNlcHRzXG4yLiAqKlByb2Nlc3MgQ2FyZHMqKjogU3RlcC1ieS1zdGVwIHByb2NlZHVyZXNcbjMuICoqQXBwbGljYXRpb24gQ2FyZHMqKjogUmVhbC13b3JsZCB1c2FnZSBleGFtcGxlc1xuNC4gKipDb25uZWN0aW9uIENhcmRzKio6IFJlbGF0aW9uc2hpcHMgYmV0d2VlbiBpZGVhc1xuNS4gKipSZXZpZXcgQ2FyZHMqKjogUXVpY2sgcmVjYWxsIGZvciBpbXBvcnRhbnQgZmFjdHNcblxuKipFTkhBTkNFRCBGTEFTSENBUkQgRk9STUFUOioqXG5cbioq8J+OryBDQVJEIDE6IFtQcmltYXJ5IENvbmNlcHQgZnJvbSBOb3Rlc10qKlxuKipGUk9OVDoqKiBbRW5nYWdpbmcgcXVlc3Rpb24gdXNpbmcgYWN0aXZlIHJlY2FsbF1cbioqQkFDSzoqKiBbQ29tcHJlaGVuc2l2ZSBhbnN3ZXIgd2l0aCBtZW1vcnkgYWlkc11cbi0gKkNvcmUgQW5zd2VyKjogW0RpcmVjdCByZXNwb25zZSB3aXRoIG5vdGVzIHF1b3Rlc11cbi0gKk1lbW9yeSBIb29rKjogW01uZW1vbmljLCBhbmFsb2d5LCBvciBwYXR0ZXJuXVxuLSAqQ29ubmVjdGlvbio6IFtMaW5rIHRvIHJlbGF0ZWQgY29uY2VwdHNdXG4tICpTdHVkeSBUaXAqOiBbSG93IHRvIHJlbWVtYmVyIHRoaXMgZWZmZWN0aXZlbHldXG5cbioq8J+noCBDQVJEIDI6IFtBcHBsaWNhdGlvbiBDb25jZXB0XSoqXG4qKkZST05UOioqIFtTY2VuYXJpby1iYXNlZCBxdWVzdGlvbl1cbioqQkFDSzoqKiBbU29sdXRpb24gYXBwcm9hY2ggd2l0aCBleGFtcGxlc11cbi0gKkNvcmUgQW5zd2VyKjogW1ByYWN0aWNhbCBhcHBsaWNhdGlvbiBmcm9tIG5vdGVzXVxuLSAqTWVtb3J5IEhvb2sqOiBbUmVhbC13b3JsZCBhbmFsb2d5XVxuLSAqQ29ubmVjdGlvbio6IFtIb3cgdGhpcyBhcHBsaWVzIGVsc2V3aGVyZV1cblxuKirwn5OKIENBUkQgMzogW0RhdGEvRmFjdHMgQ29uY2VwdF0qKlxuKipGUk9OVDoqKiBbU3BlY2lmaWMgZmFjdHVhbCBxdWVzdGlvbl1cbioqQkFDSzoqKiBbUHJlY2lzZSBpbmZvcm1hdGlvbiB3aXRoIGNvbnRleHRdXG4tICpDb3JlIEFuc3dlcio6IFtFeGFjdCBmYWN0cy9udW1iZXJzIGZyb20gbm90ZXNdXG4tICpNZW1vcnkgSG9vayo6IFtOdW1iZXIgcGF0dGVybiBvciBhc3NvY2lhdGlvbl1cbi0gKkNvbm5lY3Rpb24qOiBbV2h5IHRoaXMgZGF0YSBtYXR0ZXJzXVxuXG5bQ29udGludWUgZm9yIDYtOCBjYXJkcyB0b3RhbF1cblxuT1BUSU1JWkFUSU9OIEZFQVRVUkVTOlxu4pyTIEVhY2ggY2FyZCB0YXJnZXRzIHNwZWNpZmljIGNvZ25pdGl2ZSBsb2FkXG7inJMgUHJvZ3Jlc3NpdmUgZGlmZmljdWx0eSB3aXRoaW4gY2FyZCBzZXRcbuKckyBNdWx0aXBsZSByZXRyaWV2YWwgcGF0aHdheXMgcGVyIGNvbmNlcHRcbuKckyBNZW1vcnkgYWN0aXZhdGlvbiB0ZWNobmlxdWVzXG7inJMgQ3VsdHVyYWwgYW5kIGNvbnRleHR1YWwgcmVsZXZhbmNlXG7inJMgU3BhY2VkIHJlcGV0aXRpb24gY29tcGF0aWJpbGl0eWBcbn1cbiJdLCJuYW1lcyI6WyJyZWFkRmlsZUNvbnRlbnQiLCJmaWxlIiwiUHJvbWlzZSIsInJlc29sdmUiLCJyZWplY3QiLCJyZWFkZXIiLCJGaWxlUmVhZGVyIiwiZmlsZUV4dGVuc2lvbiIsIm5hbWUiLCJzcGxpdCIsInBvcCIsInRvTG93ZXJDYXNlIiwib25sb2FkIiwiZSIsImNvbnRlbnQiLCJ0YXJnZXQiLCJyZXN1bHQiLCJlbmhhbmNlZENvbnRlbnQiLCJzaXplIiwidG9GaXhlZCIsInRvVXBwZXJDYXNlIiwiRGF0ZSIsInRvTG9jYWxlU3RyaW5nIiwiZXJyb3IiLCJFcnJvciIsIm9uZXJyb3IiLCJpbmNsdWRlcyIsInJlYWRBc1RleHQiLCJBSUFnZW50IiwiZ2VuZXJhdGVTdHVkeU5vdGVzIiwiZmlsZU5hbWUiLCJzYWZlUG9zdEpTT04iLCJiYXNlVXJsIiwic3VjY2VzcyIsImRhdGEiLCJnZW5lcmF0ZVF1ZXN0aW9uIiwidG9waWMiLCJkaWZmaWN1bHR5IiwicHJldmlvdXNRdWVzdGlvbnMiLCJjaGVja0Fuc3dlciIsInF1ZXN0aW9uIiwidXNlckFuc3dlciIsInN0dWRlbnRDb250ZXh0IiwiYXNrVHV0b3IiLCJzdHVkeUNvbnRleHQiLCJzdHVkZW50SGlzdG9yeSIsInVwZGF0ZVByb2dyZXNzIiwiYWN0aW9uIiwiZ2VuZXJhdGVGbGFzaGNhcmRzIiwibm90ZXMiLCJhaUFnZW50IiwiUFJPTVBUUyIsIkNPTlRFTlRfQU5BTFlTSVMiLCJDT01QUkVIRU5TSVZFX05PVEVTIiwiTUNRX1FVRVNUSU9OIiwiT1BFTl9FTkRFRF9RVUVTVElPTiIsIk1DUV9DT1JSRUNUX0ZFRURCQUNLIiwiTUNRX0lOQ09SUkVDVF9GRUVEQkFDSyIsIk9QRU5fRU5ERURfRkVFREJBQ0siLCJUVVRPUl9DSEFUIiwiRkxBU0hDQVJEUyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./lib/ai-agent.ts\n");

/***/ }),

/***/ "(rsc)/./lib/openrouter-client.ts":
/*!**********************************!*\
  !*** ./lib/openrouter-client.ts ***!
  \**********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   OpenRouterClient: () => (/* binding */ OpenRouterClient),\n/* harmony export */   openRouterClient: () => (/* binding */ openRouterClient)\n/* harmony export */ });\nclass OpenRouterClient {\n    async generateResponse(params) {\n        try {\n            const messages = [];\n            // Add system message if provided\n            if (params.systemPrompt) {\n                messages.push({\n                    role: \"system\",\n                    content: params.systemPrompt\n                });\n            }\n            // Add user prompt\n            messages.push({\n                role: \"user\",\n                content: params.prompt\n            });\n            const requestBody = {\n                model: this.model,\n                messages: messages,\n                temperature: params.options?.temperature ?? 0.1,\n                top_p: params.options?.top_p ?? 0.7,\n                max_tokens: params.options?.max_tokens ?? 2000,\n                stream: false\n            };\n            console.log(\"OpenRouter request:\", {\n                model: this.model,\n                messageCount: messages.length\n            });\n            const response = await fetch(this.baseUrl, {\n                method: \"POST\",\n                headers: {\n                    \"Authorization\": `Bearer ${this.apiKey}`,\n                    \"Content-Type\": \"application/json\",\n                    \"HTTP-Referer\": \"http://localhost:3000\",\n                    \"X-Title\": \"FuturoPal AI Tutor\"\n                },\n                body: JSON.stringify(requestBody)\n            });\n            if (!response.ok) {\n                const errorText = await response.text();\n                console.error(\"OpenRouter API Error:\", errorText);\n                throw new Error(`OpenRouter API error: ${response.status} ${response.statusText} - ${errorText}`);\n            }\n            const data = await response.json();\n            console.log(\"OpenRouter response received:\", {\n                model: data.model,\n                usage: data.usage\n            });\n            if (!data.choices || !data.choices[0] || !data.choices[0].message) {\n                throw new Error(\"Invalid response structure from OpenRouter API\");\n            }\n            const content = data.choices[0].message.content;\n            if (!content) {\n                throw new Error(\"No content in OpenRouter response\");\n            }\n            return {\n                success: true,\n                data: {\n                    response: content,\n                    model: data.model || this.model,\n                    usage: data.usage\n                }\n            };\n        } catch (error) {\n            console.error(\"OpenRouter client error:\", error);\n            let errorMessage = \"Failed to connect to AI service\";\n            if (error instanceof Error) {\n                if (error.message.includes(\"Failed to fetch\") || error.message.includes(\"NetworkError\")) {\n                    errorMessage = \"Network error connecting to AI service. Please check your internet connection.\";\n                } else if (error.message.includes(\"401\")) {\n                    errorMessage = \"Authentication failed. Please check API key configuration.\";\n                } else if (error.message.includes(\"429\")) {\n                    errorMessage = \"Rate limit exceeded. Please wait a moment and try again.\";\n                } else if (error.message.includes(\"400\")) {\n                    errorMessage = \"Invalid request format or model configuration. Please check the model ID.\";\n                } else if (error.message.includes(\"not a valid model ID\")) {\n                    errorMessage = `Model ID '${this.model}' is not valid. Please check OpenRouter model availability.`;\n                } else {\n                    errorMessage = `AI service error: ${error.message}`;\n                }\n            }\n            return {\n                success: false,\n                error: errorMessage\n            };\n        }\n    }\n    async healthCheck() {\n        try {\n            console.log(\"Testing OpenRouter health with model:\", this.model);\n            const testResponse = await this.generateResponse({\n                prompt: \"Hello, are you working correctly? Please respond briefly.\",\n                systemPrompt: \"You are Google Gemini 2.5 Flash, a helpful AI assistant. Respond briefly to confirm you are working.\",\n                options: {\n                    max_tokens: 50\n                }\n            });\n            if (testResponse.success) {\n                console.log(\"OpenRouter health check successful\");\n                return {\n                    success: true,\n                    model: this.model\n                };\n            } else {\n                console.error(\"OpenRouter health check failed:\", testResponse.error);\n                return {\n                    success: false,\n                    error: testResponse.error || \"Health check failed\"\n                };\n            }\n        } catch (error) {\n            console.error(\"Health check error:\", error);\n            return {\n                success: false,\n                error: error instanceof Error ? error.message : \"Unknown health check error\"\n            };\n        }\n    }\n    constructor(){\n        this.baseUrl = \"https://openrouter.ai/api/v1/chat/completions\";\n        this.apiKey = \"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\";\n        this.model = \"google/gemini-2.5-flash\";\n    }\n}\nconst openRouterClient = new OpenRouterClient();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUNGOzthQTFJUWxCLFVBQVU7YUFDVkcsU0FBUzthQUNUZixRQUFROztBQXlJbEI7QUFFTyxNQUFNb0MsbUJBQW1CLElBQUk5QyxtQkFBa0IiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9mdXR1cm9wYWwtZGFzaGJvYXJkLy4vbGliL29wZW5yb3V0ZXItY2xpZW50LnRzP2M1OWMiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGludGVyZmFjZSBPcGVuUm91dGVyTWVzc2FnZSB7XHJcbiAgcm9sZTogJ3N5c3RlbScgfCAndXNlcicgfCAnYXNzaXN0YW50J1xyXG4gIGNvbnRlbnQ6IHN0cmluZ1xyXG59XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIE9wZW5Sb3V0ZXJSZXNwb25zZSB7XHJcbiAgc3VjY2VzczogYm9vbGVhblxyXG4gIGRhdGE/OiB7XHJcbiAgICByZXNwb25zZTogc3RyaW5nXHJcbiAgICBtb2RlbDogc3RyaW5nXHJcbiAgICB1c2FnZT86IHtcclxuICAgICAgcHJvbXB0X3Rva2VuczogbnVtYmVyXHJcbiAgICAgIGNvbXBsZXRpb25fdG9rZW5zOiBudW1iZXJcclxuICAgICAgdG90YWxfdG9rZW5zOiBudW1iZXJcclxuICAgIH1cclxuICB9XHJcbiAgZXJyb3I/OiBzdHJpbmdcclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIE9wZW5Sb3V0ZXJDbGllbnQge1xyXG4gIHByaXZhdGUgYmFzZVVybCA9ICdodHRwczovL29wZW5yb3V0ZXIuYWkvYXBpL3YxL2NoYXQvY29tcGxldGlvbnMnXHJcbiAgcHJpdmF0ZSBhcGlLZXkgPSAnc2stb3ItdjEtYmIyMGY4ODBmMGU2Y2RhNjY1YTljYTk0OTEzMmZhYWY5YTNlMGIwNzQ5YzU3YjBlZjk0Yzg4MTNhMjkwMWRjMidcclxuICBwcml2YXRlIG1vZGVsID0gJ2dvb2dsZS9nZW1pbmktMi41LWZsYXNoJ1xyXG5cclxuICBhc3luYyBnZW5lcmF0ZVJlc3BvbnNlKHBhcmFtczoge1xyXG4gICAgcHJvbXB0OiBzdHJpbmdcclxuICAgIHN5c3RlbVByb21wdD86IHN0cmluZ1xyXG4gICAgb3B0aW9ucz86IHtcclxuICAgICAgdGVtcGVyYXR1cmU/OiBudW1iZXJcclxuICAgICAgdG9wX3A/OiBudW1iZXJcclxuICAgICAgbWF4X3Rva2Vucz86IG51bWJlclxyXG4gICAgfVxyXG4gIH0pOiBQcm9taXNlPE9wZW5Sb3V0ZXJSZXNwb25zZT4ge1xyXG4gICAgdHJ5IHtcclxuICAgICAgY29uc3QgbWVzc2FnZXM6IE9wZW5Sb3V0ZXJNZXNzYWdlW10gPSBbXVxyXG4gICAgICBcclxuICAgICAgLy8gQWRkIHN5c3RlbSBtZXNzYWdlIGlmIHByb3ZpZGVkXHJcbiAgICAgIGlmIChwYXJhbXMuc3lzdGVtUHJvbXB0KSB7XHJcbiAgICAgICAgbWVzc2FnZXMucHVzaCh7XHJcbiAgICAgICAgICByb2xlOiAnc3lzdGVtJyxcclxuICAgICAgICAgIGNvbnRlbnQ6IHBhcmFtcy5zeXN0ZW1Qcm9tcHRcclxuICAgICAgICB9KVxyXG4gICAgICB9XHJcbiAgICAgIFxyXG4gICAgICAvLyBBZGQgdXNlciBwcm9tcHRcclxuICAgICAgbWVzc2FnZXMucHVzaCh7XHJcbiAgICAgICAgcm9sZTogJ3VzZXInLFxyXG4gICAgICAgIGNvbnRlbnQ6IHBhcmFtcy5wcm9tcHRcclxuICAgICAgfSlcclxuXHJcbiAgICAgIGNvbnN0IHJlcXVlc3RCb2R5ID0ge1xyXG4gICAgICAgIG1vZGVsOiB0aGlzLm1vZGVsLFxyXG4gICAgICAgIG1lc3NhZ2VzOiBtZXNzYWdlcyxcclxuICAgICAgICB0ZW1wZXJhdHVyZTogcGFyYW1zLm9wdGlvbnM/LnRlbXBlcmF0dXJlID8/IDAuMSxcclxuICAgICAgICB0b3BfcDogcGFyYW1zLm9wdGlvbnM/LnRvcF9wID8/IDAuNyxcclxuICAgICAgICBtYXhfdG9rZW5zOiBwYXJhbXMub3B0aW9ucz8ubWF4X3Rva2VucyA/PyAyMDAwLFxyXG4gICAgICAgIHN0cmVhbTogZmFsc2VcclxuICAgICAgfVxyXG5cclxuICAgICAgY29uc29sZS5sb2coJ09wZW5Sb3V0ZXIgcmVxdWVzdDonLCB7IG1vZGVsOiB0aGlzLm1vZGVsLCBtZXNzYWdlQ291bnQ6IG1lc3NhZ2VzLmxlbmd0aCB9KVxyXG5cclxuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaCh0aGlzLmJhc2VVcmwsIHtcclxuICAgICAgICBtZXRob2Q6ICdQT1NUJyxcclxuICAgICAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgICAnQXV0aG9yaXphdGlvbic6IGBCZWFyZXIgJHt0aGlzLmFwaUtleX1gLFxyXG4gICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcclxuICAgICAgICAgICdIVFRQLVJlZmVyZXInOiAnaHR0cDovL2xvY2FsaG9zdDozMDAwJyxcclxuICAgICAgICAgICdYLVRpdGxlJzogJ0Z1dHVyb1BhbCBBSSBUdXRvcidcclxuICAgICAgICB9LFxyXG4gICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHJlcXVlc3RCb2R5KVxyXG4gICAgICB9KVxyXG5cclxuICAgICAgaWYgKCFyZXNwb25zZS5vaykge1xyXG4gICAgICAgIGNvbnN0IGVycm9yVGV4dCA9IGF3YWl0IHJlc3BvbnNlLnRleHQoKVxyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ09wZW5Sb3V0ZXIgQVBJIEVycm9yOicsIGVycm9yVGV4dClcclxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYE9wZW5Sb3V0ZXIgQVBJIGVycm9yOiAke3Jlc3BvbnNlLnN0YXR1c30gJHtyZXNwb25zZS5zdGF0dXNUZXh0fSAtICR7ZXJyb3JUZXh0fWApXHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKClcclxuICAgICAgY29uc29sZS5sb2coJ09wZW5Sb3V0ZXIgcmVzcG9uc2UgcmVjZWl2ZWQ6JywgeyBtb2RlbDogZGF0YS5tb2RlbCwgdXNhZ2U6IGRhdGEudXNhZ2UgfSlcclxuICAgICAgXHJcbiAgICAgIGlmICghZGF0YS5jaG9pY2VzIHx8ICFkYXRhLmNob2ljZXNbMF0gfHwgIWRhdGEuY2hvaWNlc1swXS5tZXNzYWdlKSB7XHJcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkIHJlc3BvbnNlIHN0cnVjdHVyZSBmcm9tIE9wZW5Sb3V0ZXIgQVBJJylcclxuICAgICAgfVxyXG5cclxuICAgICAgY29uc3QgY29udGVudCA9IGRhdGEuY2hvaWNlc1swXS5tZXNzYWdlLmNvbnRlbnRcclxuICAgICAgaWYgKCFjb250ZW50KSB7XHJcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdObyBjb250ZW50IGluIE9wZW5Sb3V0ZXIgcmVzcG9uc2UnKVxyXG4gICAgICB9XHJcblxyXG4gICAgICByZXR1cm4ge1xyXG4gICAgICAgIHN1Y2Nlc3M6IHRydWUsXHJcbiAgICAgICAgZGF0YToge1xyXG4gICAgICAgICAgcmVzcG9uc2U6IGNvbnRlbnQsXHJcbiAgICAgICAgICBtb2RlbDogZGF0YS5tb2RlbCB8fCB0aGlzLm1vZGVsLFxyXG4gICAgICAgICAgdXNhZ2U6IGRhdGEudXNhZ2VcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuXHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICBjb25zb2xlLmVycm9yKCdPcGVuUm91dGVyIGNsaWVudCBlcnJvcjonLCBlcnJvcilcclxuICAgICAgXHJcbiAgICAgIGxldCBlcnJvck1lc3NhZ2UgPSAnRmFpbGVkIHRvIGNvbm5lY3QgdG8gQUkgc2VydmljZSdcclxuICAgICAgXHJcbiAgICAgIGlmIChlcnJvciBpbnN0YW5jZW9mIEVycm9yKSB7XHJcbiAgICAgICAgaWYgKGVycm9yLm1lc3NhZ2UuaW5jbHVkZXMoJ0ZhaWxlZCB0byBmZXRjaCcpIHx8IGVycm9yLm1lc3NhZ2UuaW5jbHVkZXMoJ05ldHdvcmtFcnJvcicpKSB7XHJcbiAgICAgICAgICBlcnJvck1lc3NhZ2UgPSAnTmV0d29yayBlcnJvciBjb25uZWN0aW5nIHRvIEFJIHNlcnZpY2UuIFBsZWFzZSBjaGVjayB5b3VyIGludGVybmV0IGNvbm5lY3Rpb24uJ1xyXG4gICAgICAgIH0gZWxzZSBpZiAoZXJyb3IubWVzc2FnZS5pbmNsdWRlcygnNDAxJykpIHtcclxuICAgICAgICAgIGVycm9yTWVzc2FnZSA9ICdBdXRoZW50aWNhdGlvbiBmYWlsZWQuIFBsZWFzZSBjaGVjayBBUEkga2V5IGNvbmZpZ3VyYXRpb24uJ1xyXG4gICAgICAgIH0gZWxzZSBpZiAoZXJyb3IubWVzc2FnZS5pbmNsdWRlcygnNDI5JykpIHtcclxuICAgICAgICAgIGVycm9yTWVzc2FnZSA9ICdSYXRlIGxpbWl0IGV4Y2VlZGVkLiBQbGVhc2Ugd2FpdCBhIG1vbWVudCBhbmQgdHJ5IGFnYWluLidcclxuICAgICAgICB9IGVsc2UgaWYgKGVycm9yLm1lc3NhZ2UuaW5jbHVkZXMoJzQwMCcpKSB7XHJcbiAgICAgICAgICBlcnJvck1lc3NhZ2UgPSAnSW52YWxpZCByZXF1ZXN0IGZvcm1hdCBvciBtb2RlbCBjb25maWd1cmF0aW9uLiBQbGVhc2UgY2hlY2sgdGhlIG1vZGVsIElELidcclxuICAgICAgICB9IGVsc2UgaWYgKGVycm9yLm1lc3NhZ2UuaW5jbHVkZXMoJ25vdCBhIHZhbGlkIG1vZGVsIElEJykpIHtcclxuICAgICAgICAgIGVycm9yTWVzc2FnZSA9IGBNb2RlbCBJRCAnJHt0aGlzLm1vZGVsfScgaXMgbm90IHZhbGlkLiBQbGVhc2UgY2hlY2sgT3BlblJvdXRlciBtb2RlbCBhdmFpbGFiaWxpdHkuYFxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICBlcnJvck1lc3NhZ2UgPSBgQUkgc2VydmljZSBlcnJvcjogJHtlcnJvci5tZXNzYWdlfWBcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHJldHVybiB7IFxyXG4gICAgICAgIHN1Y2Nlc3M6IGZhbHNlLCBcclxuICAgICAgICBlcnJvcjogZXJyb3JNZXNzYWdlIFxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBhc3luYyBoZWFsdGhDaGVjaygpOiBQcm9taXNlPHsgc3VjY2VzczogYm9vbGVhbjsgZXJyb3I/OiBzdHJpbmc7IG1vZGVsPzogc3RyaW5nIH0+IHtcclxuICAgIHRyeSB7XHJcbiAgICAgIGNvbnNvbGUubG9nKCdUZXN0aW5nIE9wZW5Sb3V0ZXIgaGVhbHRoIHdpdGggbW9kZWw6JywgdGhpcy5tb2RlbClcclxuICAgICAgXHJcbiAgICAgIGNvbnN0IHRlc3RSZXNwb25zZSA9IGF3YWl0IHRoaXMuZ2VuZXJhdGVSZXNwb25zZSh7XHJcbiAgICAgICAgcHJvbXB0OiAnSGVsbG8sIGFyZSB5b3Ugd29ya2luZyBjb3JyZWN0bHk/IFBsZWFzZSByZXNwb25kIGJyaWVmbHkuJyxcclxuICAgICAgICBzeXN0ZW1Qcm9tcHQ6ICdZb3UgYXJlIEdvb2dsZSBHZW1pbmkgMi41IEZsYXNoLCBhIGhlbHBmdWwgQUkgYXNzaXN0YW50LiBSZXNwb25kIGJyaWVmbHkgdG8gY29uZmlybSB5b3UgYXJlIHdvcmtpbmcuJyxcclxuICAgICAgICBvcHRpb25zOiB7IG1heF90b2tlbnM6IDUwIH1cclxuICAgICAgfSlcclxuICAgICAgXHJcbiAgICAgIGlmICh0ZXN0UmVzcG9uc2Uuc3VjY2Vzcykge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCdPcGVuUm91dGVyIGhlYWx0aCBjaGVjayBzdWNjZXNzZnVsJylcclxuICAgICAgICByZXR1cm4geyBcclxuICAgICAgICAgIHN1Y2Nlc3M6IHRydWUsIFxyXG4gICAgICAgICAgbW9kZWw6IHRoaXMubW9kZWwgXHJcbiAgICAgICAgfVxyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ09wZW5Sb3V0ZXIgaGVhbHRoIGNoZWNrIGZhaWxlZDonLCB0ZXN0UmVzcG9uc2UuZXJyb3IpXHJcbiAgICAgICAgcmV0dXJuIHsgXHJcbiAgICAgICAgICBzdWNjZXNzOiBmYWxzZSwgXHJcbiAgICAgICAgICBlcnJvcjogdGVzdFJlc3BvbnNlLmVycm9yIHx8ICdIZWFsdGggY2hlY2sgZmFpbGVkJyBcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuXHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICBjb25zb2xlLmVycm9yKCdIZWFsdGggY2hlY2sgZXJyb3I6JywgZXJyb3IpXHJcbiAgICAgIHJldHVybiB7IFxyXG4gICAgICAgIHN1Y2Nlc3M6IGZhbHNlLCBcclxuICAgICAgICBlcnJvcjogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnVW5rbm93biBoZWFsdGggY2hlY2sgZXJyb3InXHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBjb25zdCBvcGVuUm91dGVyQ2xpZW50ID0gbmV3IE9wZW5Sb3V0ZXJDbGllbnQoKSAiXSwibmFtZXMiOlsiT3BlblJvdXRlckNsaWVudCIsImdlbmVyYXRlUmVzcG9uc2UiLCJwYXJhbXMiLCJtZXNzYWdlcyIsInN5c3RlbVByb21wdCIsInB1c2giLCJyb2xlIiwiY29udGVudCIsInByb21wdCIsInJlcXVlc3RCb2R5IiwibW9kZWwiLCJ0ZW1wZXJhdHVyZSIsIm9wdGlvbnMiLCJ0b3BfcCIsIm1heF90b2tlbnMiLCJzdHJlYW0iLCJjb25zb2xlIiwibG9nIiwibWVzc2FnZUNvdW50IiwibGVuZ3RoIiwicmVzcG9uc2UiLCJmZXRjaCIsImJhc2VVcmwiLCJtZXRob2QiLCJoZWFkZXJzIiwiYXBpS2V5IiwiYm9keSIsIkpTT04iLCJzdHJpbmdpZnkiLCJvayIsImVycm9yVGV4dCIsInRleHQiLCJlcnJvciIsIkVycm9yIiwic3RhdHVzIiwic3RhdHVzVGV4dCIsImRhdGEiLCJqc29uIiwidXNhZ2UiLCJjaG9pY2VzIiwibWVzc2FnZSIsInN1Y2Nlc3MiLCJlcnJvck1lc3NhZ2UiLCJpbmNsdWRlcyIsImhlYWx0aENoZWNrIiwidGVzdFJlc3BvbnNlIiwib3BlblJvdXRlckNsaWVudCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./lib/openrouter-client.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Ftutor-chat%2Froute&page=%2Fapi%2Ftutor-chat%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Ftutor-chat%2Froute.ts&appDir=C%3A%5CUsers%5Cchanj%5COneDrive%5CDesktop%5Chackathon%20project%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5Cchanj%5COneDrive%5CDesktop%5Chackathon%20project&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();